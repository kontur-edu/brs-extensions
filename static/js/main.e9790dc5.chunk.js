(this["webpackJsonpbrs-extensions"]=this["webpackJsonpbrs-extensions"]||[]).push([[0],{314:function(e,t){},316:function(e,t){},325:function(e,t){},327:function(e,t){},352:function(e,t){},354:function(e,t){},355:function(e,t){},360:function(e,t){},362:function(e,t){},368:function(e,t){},370:function(e,t){},389:function(e,t){},401:function(e,t){},404:function(e,t){},430:function(e,t){},525:function(e,t,u){},526:function(e,t,u){},531:function(e,t,u){},533:function(e,t,u){},534:function(e,t,u){},535:function(e,t,u){},540:function(e,t,u){},541:function(e,t,u){},542:function(e,t,u){"use strict";u.r(t);var n,r,a=u(0),s=u.n(a),i=u(19),c=u.n(i),o=u(120),D=u(28),l=u(22),d=u(21),p="https://docs.google.com/spreadsheets/d/1Owzl3JfmFASIdC7ZMMw-0kkA3pwFSab1QdVO5dhZoxY/edit#gid=675912523",F="https://brs.urfu.ru/mrd",h=function(){function e(t){Object(l.a)(this,e),this.withProxy=void 0,this.withProxy=t}return Object(d.a)(e,[{key:"baseUrl",get:function(){return this.withProxy?"".concat("https://bbamc5stve2edro7t455.containers.yandexcloud.net","/").concat(F):F}}]),e}(),f=u(3),C=u.n(f),b=u(7),v=u(103),m=u.n(v);function g(e,t,u){if(!t)return!1;var r=JSON.stringify(t);return u!==n.Local&&u!==n.LocalAndSession||localStorage.setItem(e,r),u!==n.Session&&u!==n.LocalAndSession||sessionStorage.setItem(e,r),!0}function E(e,t){var u,r=null;if(t===n.Local&&(r=localStorage.getItem(e)),t===n.Session&&(r=sessionStorage.getItem(e)),t===n.LocalAndSession&&(r=null!==(u=sessionStorage.getItem(e))&&void 0!==u?u:localStorage.getItem(e)),!r)return null;var a=JSON.parse(r);return a||null}function A(e,t){return t!==n.Local&&t!==n.LocalAndSession||localStorage.removeItem(e),t!==n.Session&&t!==n.LocalAndSession||sessionStorage.removeItem(e),!0}!function(e){e[e.Local=0]="Local",e[e.Session=1]="Session",e[e.LocalAndSession=2]="LocalAndSession"}(n||(n={})),function(e){e[e.BrsUnauthorized=1]="BrsUnauthorized",e[e.GoogleUnauthorized=2]="GoogleUnauthorized"}(r||(r={}));var y,x=function e(t){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(l.a)(this,e),this.message=void 0,this.statusCode=void 0,this.statusCode=t,this.message=u};!function(e){e[e.Succeed=0]="Succeed",e[e.InvalidCredentials=1]="InvalidCredentials",e[e.Error=2]="Error"}(y||(y={}));var j=function(){function e(t){Object(l.a)(this,e),this.brsUrlProvider=void 0,this._sid=null,this._safeUserName=null,this._userName="Anonymous",this.brsUrlProvider=t}return Object(d.a)(e,[{key:"sid",get:function(){if(!this._sid)throw new x(r.BrsUnauthorized,"\u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0432 \u0411\u0420\u0421");return this._sid}},{key:"safeUserName",get:function(){if(!this._safeUserName)throw new x(r.BrsUnauthorized,"\u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0432 \u0411\u0420\u0421");return this._safeUserName}},{key:"userName",get:function(){return this._userName}},{key:"checkAuth",value:function(){return!(!this._sid||!this._safeUserName)}},{key:"tryRestoreAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(){var t,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sid||!this._safeUserName){e.next=2;break}return e.abrupt("return");case 2:if(!(t=E("loginInfo",n.Session))){e.next=6;break}return this.saveLoginInfo(t.sid,t.userName),e.abrupt("return");case 6:if(t=E("loginInfo",n.Local)){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.checkSidAsync(t.sid);case 11:(null===(u=e.sent)||void 0===u?void 0:u.success)&&this.saveLoginInfo(t.sid,t.userName);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkSidAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t){var u,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({method:"GET",url:this.brsUrlProvider.baseUrl+"/mvc/mobile",headers:{"X-Cookie":"JSESSIONID=".concat(t),"X-Requested-With":"XMLHttpRequest"}});case 3:if(u=e.sent,!(n=u.match(/username">([\u0410-\u042f\u0401\u0430-\u044f\u0451 -]+)</))){e.next=7;break}return e.abrupt("return",{success:!0,userName:n[1]});case 7:return e.abrupt("return",{success:!1,userName:"Anonymous"});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loginAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u){var n,r,a,s,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestSidAsync(t,u);case 2:if((n=e.sent)&&"x-set-cookie"in n.headers){e.next=5;break}return e.abrupt("return",y.Error);case 5:if(r=n.headers["x-set-cookie"],a=r.match(/(?<=JSESSIONID=)\w+/)){e.next=9;break}return e.abrupt("return",y.Error);case 9:return s=a[0],e.next=12,this.checkSidAsync(s);case 12:if(null!==(i=e.sent)){e.next=15;break}return e.abrupt("return",y.Error);case 15:if(i.success){e.next=17;break}return e.abrupt("return",y.InvalidCredentials);case 17:return this.saveLoginInfo(s,i.userName),e.abrupt("return",y.Succeed);case 19:case"end":return e.stop()}}),e,this)})));return function(t,u){return e.apply(this,arguments)}}()},{key:"authBySidAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t){var u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",y.InvalidCredentials);case 2:return e.next=4,this.checkSidAsync(t);case 4:if(null!==(u=e.sent)){e.next=7;break}return e.abrupt("return",y.Error);case 7:if(u.success){e.next=9;break}return e.abrupt("return",y.InvalidCredentials);case 9:return this.saveLoginInfo(t,u.userName),e.abrupt("return",y.Succeed);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveLoginInfo",value:function(e,t){var u=t.replaceAll(/[^A-Za-z\u0410-\u042f\u0401\u0430-\u044f\u0451]/g,"_");g("loginInfo",{sid:e,safeUserName:u,userName:t},n.LocalAndSession),this._sid=e,this._safeUserName=u,this._userName=t}},{key:"logout",value:function(){this._sid=null,this._safeUserName=null,A("loginInfo",n.LocalAndSession)}},{key:"requestSidAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:this.brsUrlProvider.baseUrl+"/login",method:"POST",body:"username=".concat(t,"&password=").concat(u),resolveWithFullResponse:!0,simple:!1,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then((function(e){return e}),(function(){return null}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,u){return e.apply(this,arguments)}}()}]),e}(),k=["https://sheets.googleapis.com/$discovery/rest?version=v4"],O=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"ensureInitializedAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gapi.client){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new Promise((function(e){gapi.load("client:auth2",e)}));case 4:gapi.client.init({clientId:"122993083593-pacve8csj86voko30ia65raeg0ncrtuv.apps.googleusercontent.com",discoveryDocs:k,scope:"profile email https://www.googleapis.com/auth/spreadsheets"}).catch(console.error);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"listenAuthorized",value:function(e){var t,u,n;null===(t=gapi.auth2)||void 0===t||null===(u=t.getAuthInstance())||void 0===u||null===(n=u.isSignedIn)||void 0===n||n.listen(e)}},{key:"checkAuthorized",value:function(){var e,t,u;return null===(e=gapi.auth2)||void 0===e||null===(t=e.getAuthInstance())||void 0===t||null===(u=t.isSignedIn)||void 0===u?void 0:u.get()}},{key:"getUserName",value:function(){var e,t,u,n,r=null===(e=gapi.auth2)||void 0===e||null===(t=e.getAuthInstance())||void 0===t||null===(u=t.currentUser)||void 0===u||null===(n=u.get())||void 0===n?void 0:n.getBasicProfile();return(null===r||void 0===r?void 0:r.getName())||(null===r||void 0===r?void 0:r.getEmail())}},{key:"logout",value:function(){var e=Object(b.a)(C.a.mark((function e(){var t,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=gapi.auth2)||void 0===t||null===(u=t.getAuthInstance())||void 0===u?void 0:u.signOut();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),B=Object(a.createContext)(null),S=u(50),w=u(67),N=(u(525),u(574)),I=u(582),M=u(27),L=u(597),T=u(578),U=(u(526),u(2));function W(e){var t=e.title,u=e.loading,n=e.className,r=e.onClick,a=e.disabled,s=void 0!==a&&a;return Object(U.jsxs)("div",{className:"submit-with-loading "+n,children:[Object(U.jsx)(N.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:r,disabled:u||s,children:t}),u&&Object(U.jsx)(T.a,{color:"secondary",size:24,className:"button-progress"})]})}u(531);function R(e){var t=e.onSubmit,u=e.submitting,n=e.loading,r=e.signedIn,a=e.onLogout,i=e.userName,c=s.a.useState(""),o=Object(M.a)(c,2),D=o[0],l=o[1],d=s.a.useState(""),p=Object(M.a)(d,2),F=p[0],h=p[1],f=s.a.useState(""),C=Object(M.a)(f,2),b=C[0],v=C[1];return r?Object(U.jsxs)(s.a.Fragment,{children:[Object(U.jsxs)("p",{children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",i]}),Object(U.jsx)(N.a,{type:"button",fullWidth:!0,variant:"contained",onClick:a,color:"primary",children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0411\u0420\u0421"})]}):Object(U.jsxs)("div",{className:"brs-login-form",children:[Object(U.jsxs)("p",{children:[Object(U.jsx)("b",{children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0411\u0420\u0421"}),", \u0447\u0442\u043e\u0431\u044b \u0441\u0435\u0440\u0432\u0438\u0441 \u043c\u043e\u0433 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0432\u0430\u0448\u0438\u0445 \u043a\u0443\u0440\u0441\u0430\u0445 \u0438 \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0438 \u043e\u0442 \u0432\u0430\u0448\u0435\u0433\u043e \u0438\u043c\u0435\u043d\u0438"]}),Object(U.jsx)("p",{children:"\u042d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u0443\u0447\u0435\u0442\u043d\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c \u0411\u0420\u0421"}),Object(U.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),n||t({login:D,password:F,sid:b})},children:[Object(U.jsx)(L.a,{className:"form-component",variant:"outlined",margin:"normal",fullWidth:!0,id:"username",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",name:"username",autoFocus:!0,value:D,disabled:n,onChange:function(e){var t=e.target.value;l(t),v("")}}),Object(U.jsx)(L.a,{className:"form-component",variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",value:F,disabled:n,onChange:function(e){var t=e.target.value;h(t),v("")}}),Object(U.jsx)("p",{className:"form-component text-align-center",children:"\u0438\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 JSESSIONID \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0435\u0434\u0438\u043d\u043e\u0439 \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 \u0423\u0440\u0424\u0423"}),Object(U.jsx)(L.a,{className:"form-component",variant:"outlined",margin:"normal",fullWidth:!0,name:"sid",label:"JSESSIONID",type:"password",id:"sid",value:b,disabled:n,onChange:function(e){var t=e.target.value;v(t),l(""),h("")}}),Object(U.jsx)("a",{href:"https://docs.google.com/document/d/1btXePo-5bE8RyX7RFXnBuS-UN9SmwUithpc_UXhAWsg/edit",className:"button-link",target:"_blank",rel:"noreferrer",children:"\u041a\u0430\u043a \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c JSESSIONID"}),Object(U.jsx)(W,{className:"vertical-margin-medium",title:"\u0432\u043e\u0439\u0442\u0438",loading:u,disabled:n})]}),n&&Object(U.jsx)(T.a,{color:"primary",size:150,className:"progress"})]})}var P=u(269),G=u.n(P);function _(e){var t=e.onSignedIn,u=e.onFailure,n=e.signedIn,r=e.userName,a=e.onLogout;return Object(U.jsx)(s.a.Fragment,{children:n?Object(U.jsxs)(I.a,{className:"text-align-center",children:[Object(U.jsxs)("p",{children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",r]}),Object(U.jsx)(N.a,{type:"button",fullWidth:!0,variant:"contained",onClick:a,color:"primary",children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 Google"})]}):Object(U.jsxs)(I.a,{className:"text-align-center",children:[Object(U.jsxs)("p",{children:[Object(U.jsx)("b",{children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 Google"}),", \u0447\u0442\u043e\u0431\u044b \u0441\u0435\u0440\u0432\u0438\u0441 \u043c\u043e\u0433 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0438 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0438\u0437 \u0432\u0430\u0448\u0438\u0445 Google\xa0\u0422\u0430\u0431\u043b\u0438\u0446"]}),Object(U.jsx)(G.a,{clientId:"122993083593-pacve8csj86voko30ia65raeg0ncrtuv.apps.googleusercontent.com",buttonText:"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 Google",onSuccess:t,onFailure:u,scope:"profile email https://www.googleapis.com/auth/spreadsheets",isSignedIn:!0})]})})}var z=u(54),J=u(598),q=u(600);function X(e){var t=e.open,u=e.message,n=e.type,r=e.onClose;return Object(U.jsx)(s.a.Fragment,{children:Object(U.jsx)(q.a,{open:t,autoHideDuration:1e4,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:r,children:Object(U.jsx)(H,{severity:n,onClose:r,children:u})})})}function H(e){return Object(U.jsx)(J.a,Object(z.a)({elevation:6,variant:"filled"},e))}var V=function(e){Object(S.a)(u,e);var t=Object(w.a)(u);function u(e){var n;return Object(l.a)(this,u),(n=t.call(this,e)).handleBrsSubmit=function(){var e=Object(b.a)(C.a.mark((function e(t){var u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({submitLoading:!0}),e.next=3,n.loginBrsAsync(t);case 3:u=e.sent,n.setState({submitLoading:!1}),e.t0=u,e.next=e.t0===y.Succeed?8:e.t0===y.Error?10:e.t0===y.InvalidCredentials?12:13;break;case 8:return n.setState({alertMessage:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e",openAlert:!0,alertType:"success",brsAuthorized:!0}),e.abrupt("break",13);case 10:return n.setState({alertMessage:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :( \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435",openAlert:!0,alertType:"error"}),e.abrupt("break",13);case 12:n.setState({alertMessage:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u043b\u043e\u0433\u0438\u043d, \u043f\u0430\u0440\u043e\u043b\u044c \u0438\u043b\u0438 JSESSIONID",openAlert:!0,alertType:"error"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.loginBrsAsync=function(){var e=Object(b.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.sid){e.next=4;break}return e.next=3,n.props.brsAuth.authBySidAsync(t.sid);case 3:return e.abrupt("return",e.sent);case 4:if(!t.login||!t.password){e.next=8;break}return e.next=7,n.props.brsAuth.loginAsync(t.login,t.password);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",y.InvalidCredentials);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleCloseAlert=function(){n.setState({openAlert:!1})},n.handleGoogleSignedIn=function(){n.setState({googleAuthorized:!0})},n.handleGoogleLoginFailed=function(e){console.error(e),n.setState({openAlert:!0,alertType:"error",alertMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0412\u0430\u0448 Google \u0430\u043a\u043a\u0430\u0443\u043d\u0442 :("})},n.startWork=function(){n.setState({redirect:!0})},n.handleBrsLogout=function(){n.props.brsAuth.logout(),n.setState({brsAuthorized:!1,alertMessage:"\u0412\u044b \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u0411\u0420\u0421",alertType:"success",openAlert:!0})},n.handleGoogleLogout=Object(b.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.googleAuth.logout();case 2:n.setState({googleAuthorized:!1,alertType:"success",alertMessage:"\u0412\u044b \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 Google",openAlert:!0});case 3:case"end":return e.stop()}}),e)}))),n.renderGreeting=function(){return Object(U.jsxs)("div",{className:"greeting",children:[Object(U.jsx)("h2",{children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0411\u0420\u0421"}),Object(U.jsx)("h3",{className:"block-header",children:"\u041a\u0430\u043a \u0432\u0441\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442"}),Object(U.jsxs)("ol",{children:[Object(U.jsxs)("li",{children:["\u0412 Google\xa0\u0422\u0430\u0431\u043b\u0438\u0446\u0430\u0445 \u0432\u044b \u0437\u0430\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0435 \u043e\u0446\u0435\u043d\u043a\u0438 \u0437\u0430 \u043a\u0443\u0440\u0441 \u043f\u043e \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443"," ",Object(U.jsx)("a",{href:p,target:"_blank",rel:"noreferrer",className:"button-link",children:"\u0448\u0430\u0431\u043b\u043e\u043d\u0443"})]}),Object(U.jsx)("li",{children:"\u041f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u0442\u0435 Google \u0422\u0430\u0431\u043b\u0438\u0446\u0443 \u0432 \u0441\u0435\u0440\u0432\u0438\u0441 \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0435 \u043f\u0440\u043e\u0431\u043d\u044b\u0439 \u0437\u0430\u043f\u0443\u0441\u043a \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u0446\u0435\u043d\u043e\u043a, \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043e\u0448\u0438\u0431\u043a\u0438"}),Object(U.jsx)("li",{children:"\u041d\u0430\u043a\u043e\u043d\u0435\u0446 \u0434\u0435\u043b\u0430\u0435\u0442\u0435 \u0437\u0430\u043f\u0443\u0441\u043a \u0441 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u043c \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435\u043c \u043e\u0446\u0435\u043d\u043e\u043a"})]}),Object(U.jsx)("h3",{className:"block-header",children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445"}),Object(U.jsxs)("p",{children:["\u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0432 \u0411\u0420\u0421 \u0438 \u043d\u0438\u0433\u0434\u0435 \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044e\u0442\u0441\u044f",Object(U.jsx)("br",{}),"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0432\u0430\u043c \u043a\u0443\u0440\u0441\u0430\u0445 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0432\u0430\u0448\u0435\u043c \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435"]}),Object(U.jsx)("hr",{})]})},n.renderBrsLogin=function(){return Object(U.jsx)(R,{onSubmit:n.handleBrsSubmit,loading:n.state.brsLoading,signedIn:n.state.brsAuthorized,onLogout:n.handleBrsLogout,userName:n.props.brsAuth.userName,submitting:n.state.submitLoading})},n.renderGoogleLogin=function(){return Object(U.jsx)(_,{onSignedIn:n.handleGoogleSignedIn,signedIn:n.state.googleAuthorized,userName:n.props.googleAuth.getUserName(),onLogout:n.handleGoogleLogout,onFailure:n.handleGoogleLoginFailed})},n.renderStartWorkButton=function(){return Object(U.jsx)(N.a,{variant:"contained",onClick:n.startWork,disabled:!n.state.brsAuthorized||!n.state.googleAuthorized,color:"secondary",children:"\u043d\u0430\u0447\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443"})},n.state={brsLoading:!0,brsAuthorized:!1,googleAuthorized:!1,redirect:!1,submitLoading:!1,openAlert:!1,alertMessage:"",alertType:"error"},n}return Object(d.a)(u,[{key:"componentDidMount",value:function(){var e=Object(b.a)(C.a.mark((function e(){var t,u,n=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.googleAuth.ensureInitializedAsync();case 2:return e.next=4,this.props.brsAuth.tryRestoreAsync();case 4:this.props.googleAuth.listenAuthorized((function(e){n.setState({googleAuthorized:e})})),t=this.props.brsAuth.checkAuth(),u=this.props.googleAuth.checkAuthorized(),this.setState({brsLoading:!1,brsAuthorized:t,googleAuthorized:u});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(U.jsxs)("div",{className:"login-page",children:[this.state.redirect&&Object(U.jsx)(D.a,{to:"/work"}),Object(U.jsxs)(I.a,{component:"main",maxWidth:"md",children:[this.renderGreeting(),Object(U.jsxs)(I.a,{maxWidth:"xs",children:[Object(U.jsx)(I.a,{children:this.renderBrsLogin()}),Object(U.jsx)("hr",{className:"vertical-margin-medium"}),Object(U.jsx)(I.a,{children:this.renderGoogleLogin()})]}),Object(U.jsx)(I.a,{className:"text-align-center vertical-margin-large",children:this.renderStartWorkButton()}),Object(U.jsx)(X,{open:this.state.openAlert,message:this.state.alertMessage,type:this.state.alertType,onClose:this.handleCloseAlert})]})]})}}]),u}(s.a.Component);function Z(){return Object(U.jsx)(B.Consumer,{children:function(e){return e&&Object(U.jsx)(V,{brsAuth:e.brsAuth,googleAuth:e.googleAuth})}})}var K,Y,Q=u(13),$=u(23);u(175);!function(e){e[e.NoFailure=-1]="NoFailure",e[e.NotChosen=-19]="NotChosen",e[e.NotAllowedByDeansOffice=-18]="NotAllowedByDeansOffice",e[e.NotAppeared=0]="NotAppeared",e[e.DisrespectfulReason=12]="DisrespectfulReason",e[e.RespectfulReason=13]="RespectfulReason",e[e.NotAllowedByTeacher=18]="NotAllowedByTeacher",e[e.ShouldNotPass=19]="ShouldNotPass",e[e.AcademicLeave=20]="AcademicLeave",e[e.DroppedOut=21]="DroppedOut"}(K||(K={})),function(e){e[e.Fall=1]="Fall",e[e.Spring=2]="Spring"}(Y||(Y={}));var ee=function(){function e(t,u){Object(l.a)(this,e),this.brsAuth=void 0,this.brsUrlProvider=void 0,this.brsAuth=t,this.brsUrlProvider=u}return Object(d.a)(e,[{key:"getDisciplineCachedAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,r,a){var s,i,c,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.getDisciplineCacheName(t,u,r,a),!(i=E(s,n.Session))){e.next=4;break}return e.abrupt("return",i);case 4:return e.next=6,this.getDisciplineTotalAsync(t,u,r,a);case 6:return c=e.sent,e.next=9,this.getDisciplineInternalAsync(t,u,r,a,1,Math.max(1e4,c),c);case 9:return o=e.sent,g(s,o.disciplines,n.Session),e.abrupt("return",o.disciplines);case 12:case"end":return e.stop()}}),e,this)})));return function(t,u,n,r){return e.apply(this,arguments)}}()},{key:"getDisciplineInternalAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r,a,s,i){var c,o,D,l,d,p,F,h,f;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c="?year=".concat(t,"&termType=").concat(u,"&course=").concat(n,"&total=").concat(i,"&page=").concat(a,"&pageSize=").concat(s,"&search="),!r){e.next=11;break}return e.next=4,this.requestApiJsonAsync("/mvc/mobile/module/fetch"+c);case 4:o=e.sent,D=o.content,l=Object($.a)(D);try{for(l.s();!(d=l.n()).done;)d.value.isModule=!0}catch(C){l.e(C)}finally{l.f()}return e.abrupt("return",{disciplines:D,numberOfElements:o.numberOfElements});case 11:return e.next=13,this.requestApiJsonAsync("/mvc/mobile/discipline/fetch"+c);case 13:p=e.sent,F=p.content,h=Object($.a)(F);try{for(h.s();!(f=h.n()).done;)f.value.isModule=!1}catch(C){h.e(C)}finally{h.f()}return e.abrupt("return",{disciplines:F,numberOfElements:p.numberOfElements});case 18:case"end":return e.stop()}}),e,this)})));return function(t,u,n,r,a,s,i){return e.apply(this,arguments)}}()},{key:"clearDisciplineCacheAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,r,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(this.getDisciplineCacheName(t,u,r,a),n.Session);case 2:case"end":return e.stop()}}),e,this)})));return function(t,u,n,r){return e.apply(this,arguments)}}()},{key:"getDisciplineTotalAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r){var a,s,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r?"&its=true":"",s="?year=".concat(t,"&termType=").concat(u,"&course=").concat(n)+a,e.next=4,this.requestApiJsonAsync("/mvc/mobile/discipline/amount"+s);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,u,n,r){return e.apply(this,arguments)}}()},{key:"getAllStudentMarksAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t){var u,n,r,a,s,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=[],e.t1=Q.a,e.next=4,this.getStudentMarksAsync(t,"lecture","current");case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=Q.a,e.next=9,this.getStudentMarksAsync(t,"lecture","intermediate");case 9:return e.t5=e.sent,e.t6=(0,e.t4)(e.t5),e.t7=Q.a,e.next=14,this.getStudentMarksAsync(t,"laboratory","current");case 14:return e.t8=e.sent,e.t9=(0,e.t7)(e.t8),e.t10=Q.a,e.next=19,this.getStudentMarksAsync(t,"laboratory","intermediate");case 19:return e.t11=e.sent,e.t12=(0,e.t10)(e.t11),e.t13=Q.a,e.next=24,this.getStudentMarksAsync(t,"practice","current");case 24:return e.t14=e.sent,e.t15=(0,e.t13)(e.t14),e.t16=Q.a,e.next=29,this.getStudentMarksAsync(t,"practice","intermediate");case 29:return e.t17=e.sent,e.t18=(0,e.t16)(e.t17),e.t19=Q.a,e.next=34,this.getStudentMarksAsync(t,"additionalPractice","current");case 34:return e.t20=e.sent,e.t21=(0,e.t19)(e.t20),e.t22=Q.a,e.next=39,this.getStudentMarksAsync(t,"additionalPractice","intermediate");case 39:e.t23=e.sent,e.t24=(0,e.t22)(e.t23),u=e.t0.concat.call(e.t0,e.t3,e.t6,e.t9,e.t12,e.t15,e.t18,e.t21,e.t24),n={},r=Object($.a)(u);try{for(r.s();!(a=r.n()).done;)s=a.value,i=n[s.studentUuid]||{},n[s.studentUuid]=Object(z.a)(Object(z.a)({},i),s)}catch(c){r.e(c)}finally{r.f()}return e.abrupt("return",Object.keys(n).map((function(e){return n[e]})));case 46:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStudentMarksAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getStudentMarksInternalAsync(t.disciplineLoad,t.isModule,t.groupHistoryId,t.groupId,u,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,u,n){return e.apply(this,arguments)}}()},{key:"getStudentMarksInternalAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r,a,s){var i,c,o,D=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=D.length>6&&void 0!==D[6]&&D[6],c=D.length>7&&void 0!==D[7]&&D[7],o=u?"techgroup=".concat(r):"groupUuid=".concat(n),e.abrupt("return",this.requestApiJsonAsync("/mvc/mobile/studentMarks/fetch?disciplineLoad=".concat(t,"&").concat(o)+"&cardType=".concat(a,"&hasTest=false&isTotal=").concat(i)+"&intermediate=".concat("intermediate"===s)+"&selectedTeachers=null&showActiveStudents=".concat(c)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,u,n,r,a,s){return e.apply(this,arguments)}}()},{key:"getDisciplineMetaAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t){var u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={lecture:null,laboratory:null,practice:null,additionalPractice:null},e.next=3,this.fillCardMetaAsync(u,t,"lecture");case 3:return e.next=5,this.fillCardMetaAsync(u,t,"laboratory");case 5:return e.next=7,this.fillCardMetaAsync(u,t,"practice");case 7:return e.next=9,this.fillCardMetaAsync(u,t,"additionalPractice");case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fillCardMetaAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n){var r,a,s,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getControlActionColumnsCachedAsync(u,n,"current");case 2:return r=e.sent,e.next=5,this.getControlActionColumnsCachedAsync(u,n,"intermediate");case 5:if(a=e.sent,r.length+a.length!==0){e.next=8;break}return e.abrupt("return");case 8:return s={currentControlActions:this.extractControlActions(r),currentFactor:0,intermediateControlActions:this.extractControlActions(a),intermediateFactor:0,totalFactor:0},this.fillFactors(s,r),this.fillFactors(s,a),t[n]=s,e.next=14,this.getControlActionColumnsCachedAsync(u,n,"total");case 14:i=e.sent,this.fillTotalFactors(t,i);case 16:case"end":return e.stop()}}),e,this)})));return function(t,u,n){return e.apply(this,arguments)}}()},{key:"getControlActionColumnsCachedAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,r){var a,s,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="".concat(this.brsAuth.safeUserName,"_getControlActionColumns_").concat(t.disciplineLoad)+"_".concat(t.isModule,"_").concat(t.groupHistoryId,"_").concat(t.groupId,"_").concat(u,"_").concat(r),!(s=E(a,n.Session))){e.next=4;break}return e.abrupt("return",s);case 4:return e.next=6,this.getControlActionColumnsInternalAsync(t.disciplineLoad,t.isModule,t.groupHistoryId,t.groupId,u,r);case 6:return i=e.sent,g(a,i,n.Session),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,u,n){return e.apply(this,arguments)}}()},{key:"getControlActionColumnsInternalAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r,a,s){var i,c,o,D,l,d,p;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u?"/module":"",c=u?r:n,e.next=4,this.requestApiAsync("/mvc/mobile/view/mark/".concat(t,"/").concat(c,"/teachers").concat(i,"/").concat(a,"/").concat(s));case 4:if(o=e.sent,D="gridColumns = toTextArray(",l=");",1===(d=o.split("\r\n").map((function(e){return e.trim()})).filter((function(e){return e.startsWith(D)}))).length){e.next=10;break}throw new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0411\u0420\u0421 \u0441\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0439. \u041e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u044d\u0442\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0435\u0434\u0438\u043d\u0441\u0442\u0432\u0435\u043d\u043d\u0443\u044e \u0441\u0442\u0440\u043e\u0447\u043a\u0443 \u0441 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u043c \u0442\u0435\u0445\u043a\u0430\u0440\u0442\u044b.");case 10:return p=JSON.parse(d[0].substr(D.length,d[0].length-D.length-l.length))||[],e.abrupt("return",p);case 12:case"end":return e.stop()}}),e,this)})));return function(t,u,n,r,a,s){return e.apply(this,arguments)}}()},{key:"extractControlActions",value:function(e){var t="technologyCard";return e.filter((function(e){return e.uuid&&e.uuid.startsWith(t)})).map((function(e){return{uuid:e.uuid,uuidWithoutPrefix:e.uuid.substr(t.length),maxValue:e.maxValue,isIntermediate:e.intermediate>0,controlAction:e.controlAction}}))}},{key:"fillFactors",value:function(e,t){var u,n=Object($.a)(t);try{for(n.s();!(u=n.n()).done;){var r=u.value;switch(r.uuid){case"currentWithFactor":e.currentFactor="string"===typeof r.value?parseFloat(r.value):r.value;break;case"intermediateWithFactor":e.intermediateFactor="string"===typeof r.value?parseFloat(r.value):r.value}}}catch(a){n.e(a)}finally{n.f()}}},{key:"fillTotalFactors",value:function(e,t){var u,n=Object($.a)(t);try{for(n.s();!(u=n.n()).done;){var r=u.value;switch(r.uuid){case"lecture":case"laboratory":case"practice":case"additionalPractice":var a=e[r.uuid];null!==a&&(a.totalFactor="string"===typeof r.value?parseFloat(r.value):r.value)}}}catch(s){n.e(s)}finally{n.f()}}},{key:"putStudentMarkAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r,a,s){var i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="student=".concat(t,"&techcard=").concat(u,"&mark=").concat(isNaN(n)?"":n.toString(),"&groupId=").concat(r,"&cardTypeKey=").concat(a,"&disciplineLoadUuid=").concat(s),e.abrupt("return",this.requestApiJsonAsync("/mvc/mobile/studentMarks/put",{method:"POST",body:i,json:!1},{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,u,n,r,a,s){return e.apply(this,arguments)}}()},{key:"putStudentFailureAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u){var n,r,a,s=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:K.NoFailure,r=s.length>3&&void 0!==s[3]?s[3]:"lecture",a="markFailure=".concat(n,"&cardType=").concat(r,"&disciplineLoad=").concat(u.disciplineLoad,"&studentId=").concat(t),e.next=5,this.requestApiAsync("/mvc/mobile/failure/update",{method:"POST",body:a,json:!1},{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"});case 5:case"end":return e.stop()}}),e,this)})));return function(t,u){return e.apply(this,arguments)}}()},{key:"updateAllMarksAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateMarksAsync(t,"lecture","intermediate");case 2:return e.next=4,this.updateMarksAsync(t,"lecture","current");case 4:return e.next=6,this.updateMarksAsync(t,"lecture","intermediate");case 6:return e.next=8,this.updateMarksAsync(t,"laboratory","current");case 8:return e.next=10,this.updateMarksAsync(t,"laboratory","intermediate");case 10:return e.next=12,this.updateMarksAsync(t,"practice","current");case 12:return e.next=14,this.updateMarksAsync(t,"practice","intermediate");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateMarksAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.updateMarksInternalAsync(t.disciplineLoad,t.isModule,t.groupHistoryId,t.groupId,u,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,u,n){return e.apply(this,arguments)}}()},{key:"updateMarksInternalAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r,a,s){var i,c,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u?"/module":"",c=u?"techgroup=".concat(r):"groupUuid=".concat(n),o="disciplineLoad=".concat(t,"&").concat(c)+"&cardType=".concat(a,"&hasTest=false&isTotal=false")+"&intermediate=".concat("intermediate"===s)+"&selectedTeachers=null&showActiveStudents=true",e.abrupt("return",this.requestApiAsync("/mvc/mobile/updateMarks".concat(i),{method:"POST",body:o,json:!1},{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,u,n,r,a,s){return e.apply(this,arguments)}}()},{key:"getDisciplineCacheName",value:function(e,t,u,n){return"".concat(this.brsAuth.safeUserName,"_getDiscipline_").concat(e,"_").concat(t,"_").concat(u,"_").concat(n)}},{key:"requestApiJsonAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestApiAsync(t,u,n);case 2:return r=e.sent,e.abrupt("return",JSON.parse(r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,u,n){return e.apply(this,arguments)}}()},{key:"requestApiAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()(Object(z.a)(Object(z.a)({method:"GET"},u),{},{url:this.brsUrlProvider.baseUrl+t,headers:Object(z.a)({"X-Cookie":"JSESSIONID=".concat(this.brsAuth.sid),"X-Requested-With":"XMLHttpRequest"},n)}));case 2:if(!(a=e.sent).trimLeft().startsWith("<!DOCTYPE html>")){e.next=5;break}throw new x(r.BrsUnauthorized,t+" is Forbidden");case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,u,n){return e.apply(this,arguments)}}()}]),e}();function te(e){var t=gapi.client.sheets;function u(){return(u=Object(b.a)(C.a.mark((function u(n){var r;return C.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,t.spreadsheets.values.get({spreadsheetId:e,range:n});case 2:return r=u.sent,u.abrupt("return",r.result);case 4:case"end":return u.stop()}}),u)})))).apply(this,arguments)}function n(){return(n=Object(b.a)(C.a.mark((function u(){var n,r;return C.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,t.spreadsheets.get({spreadsheetId:e});case 2:return n=u.sent,r=JSON.parse(n.body),u.abrupt("return",r);case 5:case"end":return u.stop()}}),u)})))).apply(this,arguments)}return{readAsync:function(e){return u.apply(this,arguments)},getMetaAsync:function(){return n.apply(this,arguments)}}}function ue(e){return e&&e.toLowerCase().replace("\u0451","\u0435").replace(/[^A-Za-z\u0410-\u042f\u0401\u0430-\u044f\u04510-9]/g,"")}function ne(e,t){return ue(e)===ue(t)}function re(e){return parseFloat(e&&e.replace(",","."))}function ae(e,t){return e.reduce((function(e,u){var n="".concat(u[t]);return(e[n]=e[n]||[]).push(u),e}),{})}function se(e){return Object.keys(e)}function ie(e,t,u,n){return e%10===0||e%10>=5||e%100>10&&e%100<20?n:e%10===1?t:u}function ce(e){return Math.round(10*e)/10}function oe(e){return Math.round(100*e)/100}var De={"-":K.NoFailure,"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430":K.NotChosen,"\u041d\u0435 \u0434\u043e\u043f\u0443\u0449\u0435\u043d (\u0434\u0435\u043a\u0430\u043d\u0430\u0442)":K.NotAllowedByDeansOffice,"\u041d\u0435 \u044f\u0432\u0438\u043b\u0441\u044f":K.NotAppeared,"\u041d\u0435\u0443\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f":K.DisrespectfulReason,"\u0423\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f":K.RespectfulReason,"\u041d\u0435 \u0434\u043e\u043f\u0443\u0449\u0435\u043d":K.NotAllowedByTeacher,"\u041d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u0434\u0430\u0432\u0430\u0442\u044c":K.ShouldNotPass,"\u0410\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043e\u0442\u043f\u0443\u0441\u043a":K.AcademicLeave,"\u0412\u044b\u0431\u044b\u043b":K.DroppedOut};function le(e){if(null===e||void 0===e)return null;for(var t=0,u=Object.keys(De);t<u.length;t++){var n=u[t];if(ne(n,e))return De[n]}return K.NoFailure}function de(e){if(null===e||void 0===e)return null;for(var t=0,u=Object.keys(De);t<u.length;t++){var n=u[t];if(De[n]===e)return n}return"-"}var pe=/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g,Fe=function(){function e(t){Object(l.a)(this,e),this.spreadsheetId=void 0,this.spreadsheetId=t}return Object(d.a)(e,[{key:"getSpreadsheetDataAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t){var u,n,r,a,s,i,c,o,D,l,d,p,F,h,f;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(this.spreadsheetId,t);case 2:return u=e.sent,n=ge(u),r=Ee(n),a=Ae(t,r),e.next=8,he(this.spreadsheetId,a,r);case 8:if(s=e.sent,!(r.disciplineKeyColumn>=0&&r.disciplineValueColumn>=0)){e.next=15;break}return i=ye(n,r),c=ke(u,r),e.abrupt("return",{datas:[{actualStudents:s,disciplineConfig:c,controlActionConfigs:i}]});case 15:if(!(r.courseColumn>=0||r.academicGroupColumn>=0)){e.next=28;break}o=ye(n,r),D={},l=Object($.a)(s);try{for(l.s();!(d=l.n()).done;)null!==(p=d.value).course&&(D[p.course]||(D[p.course]=[]),D[p.course].push(p))}catch(C){l.e(C)}finally{l.f()}return F=se(D),e.next=23,xe(this.spreadsheetId,F);case 23:return h=e.sent,f=h.map((function(e){return{actualStudents:D[e.course],disciplineConfig:e,controlActionConfigs:o}})),e.abrupt("return",{datas:f});case 28:throw new Error("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0432\u0445\u043e\u0434\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b");case 29:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function he(e,t,u){return fe.apply(this,arguments)}function fe(){return(fe=Object(b.a)(C.a.mark((function e(t,u,n){var r,a,s,i,c,o,D,l,d,p,F,h,f,b,v,m,g,E,A,y,x,j,k,O,B,S,w,N,I,M,L;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.fullNameColumn>=0?n.fullNameColumn-n.left:null,a=n.surnameColumn>=0?n.surnameColumn-n.left:null,s=n.nameColumn>=0?n.nameColumn-n.left:null,i=n.patronymicColumn>=0?n.patronymicColumn-n.left:null,c=n.groupColumn>=0?n.groupColumn-n.left:null,o=n.courseColumn>=0?n.courseColumn-n.left:null,D=n.academicGroupColumn>=0?n.academicGroupColumn-n.left:null,l=null,d=n.failureColumn-n.left,p=te(t),e.next=12,p.readAsync(u);case 12:if(e.t0=e.sent.values,e.t0){e.next=15;break}e.t0=[];case 15:F=e.t0,h=[],f=Object($.a)(F);try{for(f.s();!(b=f.n()).done;)E=b.value,A=null!==r?E[r].trim():null,y=null!==a?E[a]:null,x=null!==s?E[s]:null,j=null!==i?E[i]:null,k=null!==y&&y.length>0?"".concat(y.trim()," ").concat(null!==(v=null===x||void 0===x?void 0:x.trim())&&void 0!==v?v:""," ").concat(null!==(m=null===j||void 0===j?void 0:j.trim())&&void 0!==m?m:"").trim():null,O=null!==A&&A.length>0?A:k,B=null!==c?E[c]:null,S=null!==o?E[o]:null,w=null!==D?E[D]:null,N=null===w||void 0===w||null===(g=w.match(/\d/))||void 0===g?void 0:g[0],I=null!==S&&S.length>0?S:N,M=null!==l?E[l]:null,L=null!==d?le(E[d]):null,null!==O&&O.length>0&&h.push({fullName:O,groupName:B,id:M,course:I,failure:L,properties:E})}catch(C){f.e(C)}finally{f.f()}return e.abrupt("return",h);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){return be.apply(this,arguments)}function be(){return(be=Object(b.a)(C.a.mark((function e(t,u){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=te(t),e.next=3,n.readAsync(u+"!A1:ZZ100");case 3:return r=e.sent.values,e.abrupt("return",r||null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return me.apply(this,arguments)}function me(){return(me=Object(b.a)(C.a.mark((function e(t){var u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=te(t),e.next=3,u.getMetaAsync();case 3:return e.abrupt("return",e.sent.properties.title);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e){var t=e&&e[0];if(!t)throw new Error("\u041b\u0438\u0441\u0442 Google-\u0442\u0430\u0431\u043b\u0438\u0446\u044b \u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0441\u0442\u0440\u043e\u043a");return t}function Ee(e){var t=e&&e.map((function(e){return ue(e)})),u=t.indexOf(ue("\u0413\u0440\u0443\u043f\u043f\u0430 \u0432 \u0411\u0420\u0421")),n=t.indexOf(ue("\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0418\u043c\u044f \u0432 \u0411\u0420\u0421")),r=t.indexOf(ue("\u0424\u0430\u043c\u0438\u043b\u0438\u044f")),a=t.indexOf(ue("\u0418\u043c\u044f")),s=t.indexOf(ue("\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e")),i=t.indexOf(ue("\u0413\u043e\u0434 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f")),c=t.indexOf(ue("\u0413\u0440\u0443\u043f\u043f\u0430")),o=t.indexOf(ue("\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f")),D=t.indexOf(ue("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432")),l=t.indexOf(ue("\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432"));if(o<0||n<0&&r<0||n>=o||r>=o||a>=o||s>=o||u>=0&&u>o||i>=0&&i>o||c>=0&&c>o||D>=0&&D<=o||l>=0&&l<=o||D>=0&&l!==D+1)throw new Error("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432");var d=Math.min.apply(Math,Object(Q.a)([n,r,a,s,u,i,c].filter((function(e){return e>=0}))));return{groupColumn:u,fullNameColumn:n,surnameColumn:r,nameColumn:a,patronymicColumn:s,courseColumn:i,academicGroupColumn:c,failureColumn:o,disciplineKeyColumn:D,disciplineValueColumn:l,left:d,right:o}}function Ae(e,t){var u=String.fromCharCode("A".charCodeAt(0)+t.left),n=String.fromCharCode("A".charCodeAt(0)+t.right);return"".concat(e,"!").concat(u,"2:").concat(n)}function ye(e,t){for(var u=[],n=t.left;n<=t.right;n++)n!==t.groupColumn&&n!==t.fullNameColumn&&n!==t.courseColumn&&n!==t.academicGroupColumn&&n!==t.failureColumn&&e[n]&&u.push({controlAction:e[n],propertyIndex:n-t.left});for(var r=function(){var e=s[a],t=u.filter((function(t){return ne(t.controlAction,e.controlAction)}));if(t.length>1){e.matchCount=t.length;for(var n=0;n<t.length;n++)t[n].matchIndex=n}},a=0,s=u;a<s.length;a++)r();return u}function xe(e,t){return je.apply(this,arguments)}function je(){return(je=Object(b.a)(C.a.mark((function e(t,u){var n,r,a,s,i,c,o,D,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(t);case 2:return n=e.sent,r=n.replaceAll(pe,"").trim(),a=r.lastIndexOf(","),s=r.substring(0,a).trim(),i=r.substring(a+1).trim(),c=i.split(" "),o=ne(c[0],"\u0432\u0435\u0441\u043d\u0430")?Y.Spring:Y.Fall,D=parseInt(c[1],10)+(o===Y.Spring?-1:0),l=u.map((function(e){return{name:s,year:D,termType:o,course:e,isModule:!0,defaultStudentFailure:K.NoFailure}})),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t){for(var u={name:"",year:0,termType:Y.Fall,course:1,isModule:!1,defaultStudentFailure:K.NoFailure},n={name:"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430",year:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u0433\u043e\u0434",termType:"\u0421\u0435\u043c\u0435\u0441\u0442\u0440",course:"\u041a\u0443\u0440\u0441",isModule:"\u0418\u0422\u0421",defaultStudentFailure:"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"},r=0;r<e.length;r++){var a,s,i=null===(a=e[r][t.disciplineKeyColumn])||void 0===a?void 0:a.trim();if(!i)break;var c=null===(s=e[r][t.disciplineValueColumn])||void 0===s?void 0:s.trim();Oe(u,n,i,c)}var o=function(e){var t,u=[],n=Object($.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;null!==r&&u.push(r)}}catch(a){n.e(a)}finally{n.f()}return u}(se(n).map((function(e){return n[e]})));if(o.length>0){var D=o.map((function(e){return"\xab".concat(e,"\xbb")})).join(", ");throw new Error("\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u044b: ".concat(D))}return u}function Oe(e,t,u,n){if(ne(u,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430"))n&&(e.name=n,t.name=null);else if(ne(u,"\u0418\u0422\u0421"))n&&(e.isModule="\u0434\u0430"===n.toLowerCase(),t.isModule=null);else if(ne(u,"\u0413\u043e\u0434"))n&&(e.year=parseInt(n.toLowerCase(),10),t.year=null);else if(ne(u,"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u0433\u043e\u0434")){if(n){var r=n.toLowerCase().split("/");e.year=parseInt(r[0],10),t.year=null}}else if(ne(u,"\u0421\u0435\u043c\u0435\u0441\u0442\u0440"))n&&("\u043e\u0441\u0435\u043d\u043d\u0438\u0439"===n.toLowerCase()?(e.termType=Y.Fall,t.termType=null):"\u0432\u0435\u0441\u0435\u043d\u043d\u0438\u0439"===n.toLowerCase()&&(e.termType=Y.Spring,t.termType=null));else if(ne(u,"\u041a\u0443\u0440\u0441")){if(n)"\u0432\u0441\u0435 \u043a\u0443\u0440\u0441\u044b"===n.toLowerCase().trim()?(e.course=0,t.course=null):(e.course=parseInt(n.toLowerCase(),10),t.course=null)}else if(ne(u,"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e")){var a;e.defaultStudentFailure=null!==(a=le(n))&&void 0!==a?a:K.NoFailure,t.defaultStudentFailure=null}}u(533);var Be=u(583),Se=u(581),we=u(584),Ne=u(585),Ie=u(586),Me=u(589),Le=u(587),Te=u(588);function Ue(e){var t=e.title,u=e.items,n=e.icons,r=Object(U.jsx)(Be.a,{component:"div",id:"nested-list-subheader",hidden:!t,children:t});return Object(U.jsx)(Se.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:r,className:"nested-list primary",children:u.length?We(u,0,n):Object(U.jsx)(we.a,{className:"text-align-center",children:Object(U.jsx)(Ne.a,{primary:"..."})})})}function We(e,t,u){return e.map((function(e,n){return Object(U.jsx)(Re,{item:e,icons:u,level:t},n)}))}function Re(e){var t,u=e.item,n=e.level,r=e.icons,a=u.title,i=u.nestedItems,c=u.colored,o=u.collapsed,D=u.renderAsText,l=s.a.useState(!o),d=Object(M.a)(l,2),p=d[0],F=d[1],h=i&&i.length>0,f=c&&"colored-back",C=r&&r[n],b=C&&Object(U.jsx)(Ie.a,{children:C});return Object(U.jsxs)(s.a.Fragment,{children:[Object(U.jsxs)(we.a,{button:!0,onClick:function(){return F(!p)},style:n?{paddingLeft:40*n}:void 0,className:"hover "+f,children:[b,Object(U.jsx)(Ne.a,{primary:a}),h&&(p?Object(U.jsx)(Le.a,{}):Object(U.jsx)(Te.a,{}))]}),h&&Object(U.jsx)(Me.a,{in:p,unmountOnExit:!0,children:D?Object(U.jsx)("div",{style:{paddingLeft:40*(n+1),paddingTop:10,paddingBottom:10},children:i&&(t=i,t.map((function(e,t){return Object(U.jsx)("div",{children:e.title},t)})))}):Object(U.jsx)(Se.a,{component:"div",disablePadding:!0,children:i&&We(i,n+1,r)})})]})}u(534);var Pe=u(590);function Ge(e){var t=e.enabled,u=e.onRunWorkSafe,n=e.onRunWorkUnsafe;return Object(U.jsxs)(Pe.a,{container:!0,justify:"space-around",children:[Object(U.jsx)(Pe.a,{item:!0,children:Object(U.jsx)(N.a,{variant:"contained",disabled:!t,onClick:u,color:"primary",children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0445\u043e\u0440\u043e\u0448\u043e"})}),Object(U.jsx)(Pe.a,{item:!0,children:Object(U.jsx)(N.a,{variant:"contained",disabled:!t,onClick:n,color:"secondary",children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0445\u043e\u0440\u043e\u0448\u043e"})})]})}u(535);var _e=u(6),ze=u(601),Je=u(593),qe=u(591),Xe=u(592);function He(e){return e.toLowerCase().replace("\u0451","\u0435").replace(/[ ]+/," ").trim()}var Ve,Ze=new Set(["auto","\u0431\u0430\u043b\u043b\u044b"]);!function(e){e[e.Updated=0]="Updated",e[e.Failed=1]="Failed",e[e.Skipped=2]="Skipped"}(Ve||(Ve={}));var Ke=function(){function e(t,u,n){Object(l.a)(this,e),this.brsApi=void 0,this.save=void 0,this.cancelPending=!1,this.reportManager=void 0,this.brsApi=t,this.reportManager=u,this.save=n}return Object(d.a)(e,[{key:"cancel",value:function(){this.cancelPending=!0}},{key:"putMarksToBrsAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u){var n,r,a,s,i,c,o,D=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.actualStudents,r=t.disciplineConfig,a=t.controlActionConfigs,e.prev=1,s=Object($.a)(u),e.prev=3,c=C.a.mark((function e(){var t,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.value,0!==(u=n.filter((function(e){return Qe(e,t)}))).length){e.next=4;break}return e.abrupt("return","continue");case 4:return D.reportManager.newReport({disciplineConfig:r,discipline:t,merge:{succeed:0},marks:[],skipped:[]}),e.next=7,D.putMarksForDisciplineAsync(t,u,r.defaultStudentFailure,a);case 7:if(e.sent?D.reportManager.finishReport():D.reportManager.cancelReport(),!D.cancelPending){e.next=11;break}return e.abrupt("return","break");case 11:case"end":return e.stop()}}),e)})),s.s();case 6:if((i=s.n()).done){e.next=15;break}return e.delegateYield(c(),"t0",8);case 8:if("continue"!==(o=e.t0)){e.next=11;break}return e.abrupt("continue",13);case 11:if("break"!==o){e.next=13;break}return e.abrupt("break",15);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(3),s.e(e.t1);case 20:return e.prev=20,s.f(),e.finish(20);case 23:return e.abrupt("return",null);case 26:return e.prev=26,e.t2=e.catch(1),e.abrupt("return",e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,26],[3,17,20,23]])})));return function(t,u){return e.apply(this,arguments)}}()},{key:"putMarksForDisciplineAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r){var a,s,i,c,o,D;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.brsApi.getDisciplineMetaAsync(t);case 2:if(a=e.sent,this.checkControlActionsConfiguration(t,a,r)){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,this.brsApi.getAllStudentMarksAsync(t);case 7:return s=e.sent,i=this.mergeStudents(u,s),c=i.mergedStudents,o=i.skippedActualStudents,D=i.skippedBrsStudents,this.logMergedStudents(c,o,D),e.next=12,this.putMarksForStudentsAsync(t,a,c,r);case 12:return e.next=14,this.updateFailuresForSkippedStudentsAsync(D,t,n);case 14:if(!this.save){e.next=17;break}return e.next=17,this.brsApi.updateAllMarksAsync(t);case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,this)})));return function(t,u,n,r){return e.apply(this,arguments)}}()},{key:"checkControlActionsConfiguration",value:function(e,t,u){if(this.tryGetAutoControlActionConfig(u))return!0;var n,r=this.getControlActions(t),a=Object($.a)(u);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(!this.getSuitableControlAction(e,s,r))return!1}}catch(i){a.e(i)}finally{a.f()}return!0}},{key:"putMarksForStudentsAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r){var a,s,i,c,o,D,l,d,p;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s={},i=n,c=this.save?3:2,o=0;case 4:if(!(o<c)){e.next=11;break}return e.next=7,this.putMarksForStudentsOnceAsync(s,t,u,i,r);case 7:i=e.sent;case 8:o++,e.next=4;break;case 11:for(l in D=[],s)d=s[l],this.save&&!d.finished&&(d.rating.status=Ve.Failed),D.push(d.rating);p=Object.entries(ae(D,"status")).map((function(e){var t=Object(M.a)(e,2),u=(t[0],t[1]);return{title:$e(u[0].status),students:u.map((function(e){return e.infoString})),failed:u[0].status===Ve.Failed}})),(a=this.reportManager.currentReport.marks).push.apply(a,Object(Q.a)(p));case 15:case"end":return e.stop()}}),e,this)})));return function(t,u,n,r){return e.apply(this,arguments)}}()},{key:"putMarksForStudentsOnceAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r,a){var s,i,c,o,D,l,d,p,F,h,f,v,m,g=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.map(function(){var e=Object(b.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.putMarksForStudentAsync(u,n,t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:s=e.sent,i=Object($.a)(s);try{for(i.s();!(c=i.n()).done;)D=c.value,l=null===(o=t[D.student.brs.studentUuid])||void 0===o?void 0:o.rating,d=l&&D.status===Ve.Skipped?l:D,p=D.status===Ve.Skipped,t[D.student.brs.studentUuid]={rating:d,finished:p}}catch(E){i.e(E)}finally{i.f()}return F={},e.t0=$.a,e.next=9,this.brsApi.getAllStudentMarksAsync(u);case 9:e.t1=e.sent,h=(0,e.t0)(e.t1);try{for(h.s();!(f=h.n()).done;)v=f.value,F[v.studentUuid]=v}catch(E){h.e(E)}finally{h.f()}return m=r.filter((function(e){var u;return!(null===(u=t[e.brs.studentUuid])||void 0===u?void 0:u.finished)})).map((function(e){return{actual:e.actual,brs:F[e.brs.studentUuid]||e.brs}})),e.abrupt("return",m);case 14:case"end":return e.stop()}}),e,this)})));return function(t,u,n,r,a){return e.apply(this,arguments)}}()},{key:"putMarksForStudentAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r){var a,s,i,c,o,D,l,d,p,F,h;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.tryGetAutoControlActionConfig(r),c=this.getControlActions(u),o={failed:0,updated:0,marks:[]},null===i){e.next=8;break}return e.next=6,this.putAutoMarksForStudentAsync(o,t,u,n,i);case 6:e.next=10;break;case 8:return e.next=10,this.putManualMarksForStudentAsync(o,t,n,r,c);case 10:if(D=null!==(a=n.brs.failure)&&void 0!==a?a:K.NoFailure,(l=null!==(s=n.actual.failure)&&void 0!==s?s:K.NoFailure)!==D){e.next=16;break}d="".concat(de(l)),e.next=27;break;case 16:if(d="".concat(de(l),"!"),e.prev=17,!this.save){e.next=21;break}return e.next=21,this.brsApi.putStudentFailureAsync(n.brs.studentUuid,t,l);case 21:o.updated++,e.next=27;break;case 24:e.prev=24,e.t0=e.catch(17),o.failed++;case 27:return p=o.failed>0?Ve.Failed:o.updated>0?Ve.Updated:Ve.Skipped,F=n.actual.fullName.substr(0,30),h="".concat(F," \u0431\u0430\u043b\u043b\u044b: ").concat(o.marks.join(" ")),d&&"-"!==d&&(h+=", ".concat(d)),e.abrupt("return",{student:n,status:p,infoString:h});case 32:case"end":return e.stop()}}),e,this,[[17,24]])})));return function(t,u,n,r){return e.apply(this,arguments)}}()},{key:"putAutoMarksForStudentAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r,a){var s,i,c,o,D,l,d,p,F,h,f;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.actual.properties[a.propertyIndex],i=re(s),c=this.getControlActionGroups(n),o=c.filter((function(e){return!e.isIntermediate})),D=o.reduce((function(e,t){return e+t.factor}),0),l=c.filter((function(e){return e.isIntermediate})),d=l.reduce((function(e,t){return t.factor}),0),p="[auto=".concat(i,"]"),t.marks.push("             ".concat(p).substr("".concat(p).length-1)),!(40<=i)){e.next=14;break}return e.next=12,this.putMarksTryFillActionsWithMaxScoreAsync(t,u,r,c,i);case 12:e.next=31;break;case 14:if(!(40*D<=i)){e.next=24;break}return 40,F=oe(D>0?(i-40*D)/d:0),e.next=20,this.putMarksTryFillActionsWithMaxScoreAsync(t,u,r,o,40);case 20:return e.next=22,this.putMarksTryFillActionsWithMaxScoreAsync(t,u,r,l,F);case 22:e.next=31;break;case 24:return h=0,f=oe(D>0?(i-d*h)/D:0),e.next=29,this.putMarksTryFillActionsWithMaxScoreAsync(t,u,r,o,f);case 29:return e.next=31,this.putMarksTryFillActionsWithMaxScoreAsync(t,u,r,l,h);case 31:case"end":return e.stop()}}),e,this)})));return function(t,u,n,r,a){return e.apply(this,arguments)}}()},{key:"putMarksTryFillActionsWithMaxScoreAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r,a){var s,i,c,o,D,l,d,p;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=Object($.a)(r),e.prev=1,s.s();case 3:if((i=s.n()).done){e.next=19;break}c=i.value,o=c.controlActions,D=a,l=0;case 8:if(!(l<o.length)){e.next=17;break}return d=o[l],p=d.maxValue<D?d.maxValue:ce(D),D-=p,e.next=14,this.putMarkAsync(t,u,n,d,p);case 14:l++,e.next=8;break;case 17:e.next=3;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),s.e(e.t0);case 24:return e.prev=24,s.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[1,21,24,27]])})));return function(t,u,n,r,a){return e.apply(this,arguments)}}()},{key:"putManualMarksForStudentAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r,a){var s,i,c,o,D,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=Object($.a)(r),e.prev=1,s.s();case 3:if((i=s.n()).done){e.next=14;break}if(c=i.value,o=this.getSuitableControlAction(u,c,a)){e.next=8;break}throw new Error("\u041f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0435 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u043e\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435 \u0434\u043b\u044f \xab".concat(c.controlAction,"\xbb \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0432 \u0411\u0420\u0421"));case 8:return D=n.actual.properties[c.propertyIndex],l=re(D),e.next=12,this.putMarkAsync(t,u,n,o,l);case 12:e.next=3;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),s.e(e.t0);case 19:return e.prev=19,s.f(),e.finish(19);case 22:return e.abrupt("return",t);case 23:case"end":return e.stop()}}),e,this,[[1,16,19,22]])})));return function(t,u,n,r,a){return e.apply(this,arguments)}}()},{key:"putMarkAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n,r,a){var s,i,c,o,D;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.brs[r.uuid],i=re(s),c=!isNaN(a)&&!(isNaN(i)?0===a:i===a),o=isNaN(a)?"-":a.toString(),D=r.controlAction.substring(0,3),!c){e.next=9;break}t.marks.push("       ".concat(D,"=").concat(o,"!").substr("".concat(o).length-1)),e.next=11;break;case 9:return t.marks.push("       ".concat(D,"=").concat(o," ").substr("".concat(o).length-1)),e.abrupt("return");case 11:if(e.prev=11,!this.save){e.next=15;break}return e.next=15,this.brsApi.putStudentMarkAsync(n.brs.studentUuid,r.uuidWithoutPrefix,a,u.groupHistoryId,n.brs.cardType,n.brs.disciplineLoad);case 15:t.updated++,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),t.failed++;case 21:case"end":return e.stop()}}),e,this,[[11,18]])})));return function(t,u,n,r,a){return e.apply(this,arguments)}}()},{key:"getSuitableControlAction",value:function(e,t,u){var n=u.filter((function(e){return ne(e.controlAction,t.controlAction)})),r=[];return 0===n.length?(r.push("\u0413\u0440\u0443\u043f\u043f\u0430 ".concat(e.group)+(void 0!==e.teacherName?", \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c ".concat(e.teacherName):"")),r.push("- \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u043e\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435 \xab".concat(t.controlAction,"\xbb \u043d\u0435 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e \u0441 \u0411\u0420\u0421")),r.push("- \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0435 \u0432 \u0411\u0420\u0421 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f: ".concat(u.map((function(e){return e.controlAction})).join(", "))),this.reportManager.onInvalidConfiguration(r),null):void 0!==t.matchIndex||void 0!==t.matchCount?void 0===t.matchIndex||void 0===t.matchCount||n.length!==t.matchCount||t.matchIndex>=t.matchCount?(r.push("\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f \xab".concat(t.controlAction,"\xbb")),n.length!==t.matchCount&&r.push("\u0412 \u0411\u0420\u0421 \u043d\u0430\u0439\u0434\u0435\u043d\u043e ".concat(n.length," ").concat(ie(n.length,"\u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0435 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u043e\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435","\u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f","\u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0439"),", \u0430 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e ").concat(t.matchCount)),this.reportManager.onInvalidConfiguration(r),null):n[t.matchIndex]:n.length>1?(r.push("\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0439 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0434\u043b\u044f \xab".concat(t.controlAction,"\xbb")),r.push("\u041d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f: ".concat(n.map((function(e){return e.controlAction})).join(", "))),this.reportManager.onInvalidConfiguration(r),null):n[0]}},{key:"updateFailuresForSkippedStudentsAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n){var r,a,s,i=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return i.updateFailureForStudent(e,u,n)})));case 2:(r=e.sent).length>0&&(s=Object.entries(ae(r,"status")).map((function(e){var t=Object(M.a)(e,2),u=(t[0],t[1]);return{title:$e(u[0].status),students:u.map((function(e){return e.infoString}))}})),(a=this.reportManager.currentReport.skipped).push.apply(a,Object(Q.a)(s)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,u,n){return e.apply(this,arguments)}}()},{key:"updateFailureForStudent",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u,n){var r,a,s,i,c,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.failure?t.failure:K.NoFailure,(s=n)!==a){e.next=6;break}r=Ve.Skipped,e.next=16;break;case 6:if(e.prev=6,!this.save){e.next=10;break}return e.next=10,this.brsApi.putStudentFailureAsync(t.studentUuid,u,s);case 10:r=Ve.Updated,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),r=Ve.Failed;case 16:return i=t.studentFio.substr(0,30),c=r!==Ve.Skipped?"\u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e \xab".concat(de(s),"\xbb, \u0431\u044b\u043b\u043e \xab").concat(de(a),"\xbb"):"\xab".concat(de(s),"\xbb"),o="".concat(i,", ").concat(c),e.abrupt("return",{status:r,infoString:o});case 20:case"end":return e.stop()}}),e,this,[[6,13]])})));return function(t,u,n){return e.apply(this,arguments)}}()},{key:"tryGetAutoControlActionConfig",value:function(e){var t=e.filter((function(e){return Ze.has(e.controlAction.toLowerCase())}));return 1===t.length?t[0]:(t.length>1&&this.reportManager.onInvalidConfiguration(["\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u043b\u043e\u043d\u043e\u043a \u0441 \u0430\u0432\u0442\u043e\u0438\u0442\u043e\u0433\u043e\u043c"]),null)}},{key:"getControlActions",value:function(e){var t,u,n,r,a,s,i,c;return[].concat(Object(Q.a)((null===(t=e.lecture)||void 0===t?void 0:t.currentControlActions)||[]),Object(Q.a)((null===(u=e.lecture)||void 0===u?void 0:u.intermediateControlActions)||[]),Object(Q.a)((null===(n=e.laboratory)||void 0===n?void 0:n.currentControlActions)||[]),Object(Q.a)((null===(r=e.laboratory)||void 0===r?void 0:r.intermediateControlActions)||[]),Object(Q.a)((null===(a=e.practice)||void 0===a?void 0:a.currentControlActions)||[]),Object(Q.a)((null===(s=e.practice)||void 0===s?void 0:s.intermediateControlActions)||[]),Object(Q.a)((null===(i=e.additionalPractice)||void 0===i?void 0:i.currentControlActions)||[]),Object(Q.a)((null===(c=e.additionalPractice)||void 0===c?void 0:c.intermediateControlActions)||[]))}},{key:"getControlActionGroups",value:function(e){var t=[];return e.lecture&&this.pushControlActionGroups(t,e.lecture),e.laboratory&&this.pushControlActionGroups(t,e.laboratory),e.practice&&this.pushControlActionGroups(t,e.practice),e.additionalPractice&&this.pushControlActionGroups(t,e.additionalPractice),t}},{key:"pushControlActionGroups",value:function(e,t){if(t.currentControlActions.length>0){var u=oe(t.currentFactor*t.totalFactor),n=t.currentControlActions;e.push({factor:u,controlActions:n,isIntermediate:!1})}if(t.intermediateControlActions.length>0){var r=oe(t.intermediateFactor*t.totalFactor),a=t.intermediateControlActions;e.push({factor:r,controlActions:a,isIntermediate:!0})}}},{key:"mergeStudents",value:function(e,t){var u,n=t.filter(Ye),r=[],a=[],s=Object($.a)(e);try{var i=function(){var e=u.value,t=n.filter((function(t){return function(e,t){var u=He(e.studentFio),n=He(t.fullName);return u.startsWith(n)}(t,e)}));1===t.length?r.push({actual:e,brs:t[0]}):a.push(e)};for(s.s();!(u=s.n()).done;)i()}catch(d){s.e(d)}finally{s.f()}var c,o=[],D=Object($.a)(n);try{var l=function(){var e=c.value;r.some((function(t){return t.brs.studentUuid===e.studentUuid}))||o.push(e)};for(D.s();!(c=D.n()).done;)l()}catch(d){D.e(d)}finally{D.f()}return{mergedStudents:r,skippedActualStudents:a,skippedBrsStudents:o}}},{key:"logMergedStudents",value:function(e,t,u){var n=this.reportManager.currentReport;n.merge.succeed=e.length,t.length>0&&(n.merge.failedActual=t.map((function(e){return e.fullName}))),u.length>0&&(n.merge.failedBrs=u.map((function(e){return e.studentFio})))}}]),e}();function Ye(e){return"\u041f\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043d"!==e.studentStatus&&"\u041e\u0442\u0447\u0438\u0441\u043b\u0435\u043d"!==e.studentStatus&&"\u041f\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043d"!==e.studentStatus&&"\u041e\u0442\u043f.\u0430\u043a\u0430\u0434."!==e.studentStatus&&e.failure!==K.ShouldNotPass}function Qe(e,t){if(e.groupName&&e.groupName.length>0){var u=ue(e.groupName);return ue(t.group).startsWith(u)}return!0}function $e(e){switch(e){case Ve.Updated:return"\u041e\u0411\u041d\u041e\u0412\u041b\u0415\u041d\u041e";case Ve.Skipped:return"\u041f\u0420\u041e\u041f\u0423\u0429\u0415\u041d\u041e";case Ve.Failed:return"\u041f\u0420\u041e\u0412\u0410\u041b\u0415\u041d\u041e";default:throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u0446\u0435\u043d\u043e\u043a")}}var et,tt=function(){function e(t,u){Object(l.a)(this,e),this._currentReport=null,this.onReportFinished=void 0,this.onInvalidConfiguration=void 0,this.onReportFinished=t,this.onInvalidConfiguration=u}return Object(d.a)(e,[{key:"currentReport",get:function(){if(!this._currentReport)throw new Error("\u041f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u0430 \u0435\u0449\u0435 \u043d\u0435 \u043d\u0430\u0447\u0430\u0442\u043e");return this._currentReport}},{key:"newReport",value:function(e){this.finishReport(),this._currentReport=e}},{key:"finishReport",value:function(){this._currentReport&&this.onReportFinished(this._currentReport),this._currentReport=null}},{key:"cancelReport",value:function(){this._currentReport=null}}]),e}(),ut=Object(_e.a)((function(){return{root:{padding:0}}}))(qe.a),nt=Object(_e.a)((function(){return{root:{display:"flex",justifyContent:"space-around"}}}))(Xe.a),rt=function(e){Object(S.a)(u,e);var t=Object(w.a)(u);function u(e){var n;Object(l.a)(this,u),(n=t.call(this,e)).marksManager=void 0,n.logConfigurationErrors=function(e){var t=e.map((function(e){return{title:e,colored:!0}}));n.setState({logItems:t})},n.logMessage=function(){var e=Object(b.a)(C.a.mark((function e(t){var u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.reportToNestedListItems(t);case 2:u=e.sent,n.setState({logItems:u});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.startWork=Object(b.a)(C.a.mark((function e(){var t,u,r,a,s,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object($.a)(n.props.marksDatas),e.prev=1,t.s();case 3:if((u=t.n()).done){e.next=12;break}return r=u.value,a=r.spreadsheetData,s=r.suitableDisciplines,e.next=8,n.marksManager.putMarksToBrsAsync(a,s);case 8:(i=e.sent)&&("object"===typeof i?n.props.onError(i.toString()):"string"===typeof i&&n.props.onError(i));case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t.e(e.t0);case 17:return e.prev=17,t.f(),e.finish(17);case 20:n.setState({cancelPending:!1,okLoading:!1});case 21:case"end":return e.stop()}}),e,null,[[1,14,17,20]])}))),n.cancelWork=function(){n.setState({cancelPending:!0}),n.marksManager.cancel()};var r=e.brsApi,a=e.save,s=new tt(n.logMessage,n.logConfigurationErrors);return n.marksManager=new Ke(r,s,a),n.state={okLoading:!0,cancelPending:!1,logItems:[]},n}return Object(d.a)(u,[{key:"componentDidMount",value:function(){this.startWork()}},{key:"componentWillUnmount",value:function(){this.marksManager.cancel()}},{key:"reportToNestedListItems",value:function(e){var t=this.state.logItems;return new Promise((function(u){var n,r,a=e.disciplineConfig,s=a.termType===Y.Fall?"\u043e\u0441\u0435\u043d\u044c ".concat(a.year):a.termType===Y.Spring?"\u0432\u0435\u0441\u043d\u0430 ".concat(a.year+1):"".concat(a.year,"/").concat(a.year+1),i="\u0413\u0440\u0443\u043f\u043f\u0430 ".concat(e.discipline.group," (").concat(s,", ").concat(a.course," \u043a\u0443\u0440\u0441)"),c=[],o={title:i,collapsed:!0,nestedItems:c},D=!1,l=e.merge,d="\u0421\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435: ".concat(l.succeed," \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),p=(null===(n=l.failedActual)||void 0===n?void 0:n.length)||0;d+=", ".concat(p," ").concat(ie(p,"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439","\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0445","\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0445")," \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435");var F,h,f=(null===(r=l.failedBrs)||void 0===r?void 0:r.length)||0,C={title:d+=", ".concat(f," ").concat(ie(f,"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439","\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0445","\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0445")," \u0432 \u0411\u0420\u0421"),nestedItems:[],collapsed:!0};(c.push(C),l.failedActual)&&(D=!0,i="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c ".concat(l.failedActual.length," ").concat(ie(l.failedActual.length,"\u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430","\u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432","\u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432")," \u0438\u0437 Google \u0422\u0430\u0431\u043b\u0438\u0446\u044b"),null===(F=C.nestedItems)||void 0===F||F.push({title:i,nestedItems:l.failedActual.map((function(e){return{title:e}})),colored:!0,collapsed:!1,renderAsText:!0}));l.failedBrs&&(D=!0,i="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c ".concat(l.failedBrs.length," ").concat(ie(l.failedBrs.length,"\u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430","\u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432","\u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432")," \u0438\u0437 \u0411\u0420\u0421"),null===(h=C.nestedItems)||void 0===h||h.push({title:i,nestedItems:l.failedBrs.map((function(e){return{title:e}})),colored:!0,collapsed:!1,renderAsText:!0}));var b=e.marks,v={title:"\u0412\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0431\u0430\u043b\u043b\u043e\u0432",collapsed:!0};v.nestedItems=b.map((function(e){var t,u,n=e.title,r=e.students,a=e.failed;return{title:"".concat(n,": ").concat(null!==(t=null===r||void 0===r?void 0:r.length)&&void 0!==t?t:0," ").concat(ie(null!==(u=null===r||void 0===r?void 0:r.length)&&void 0!==u?u:0,"\u0441\u0442\u0443\u0434\u0435\u043d\u0442","\u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430","\u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432")),nestedItems:null===r||void 0===r?void 0:r.map((function(e){return{title:e}})),colored:!!a,collapsed:!1,renderAsText:!0}})),c.push(v),D=D||b.filter((function(e){return!!e.failed})).length>0;var m=e.skipped;if(m.length>0){var g={title:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u044b \u0438\u0437 \u0411\u0420\u0421",collapsed:!0};g.nestedItems=m.map((function(e){var t,u,n=e.title,r=e.students;return{title:"".concat(n,": ").concat(null!==(t=null===r||void 0===r?void 0:r.length)&&void 0!==t?t:0," ").concat(ie(null!==(u=null===r||void 0===r?void 0:r.length)&&void 0!==u?u:0,"\u0441\u0442\u0443\u0434\u0435\u043d\u0442","\u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430","\u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432")),nestedItems:null===r||void 0===r?void 0:r.map((function(e){return{title:e}})),collapsed:!1,renderAsText:!0}})),c.push(g)}D&&(o.colored=!0),t.push(o),u(t)}))}},{key:"render",value:function(){return Object(U.jsx)(s.a.Fragment,{children:Object(U.jsxs)(ze.a,{open:!0,maxWidth:"md",fullWidth:!0,className:"worker-dialog",children:[Object(U.jsx)(Je.a,{children:"\u0416\u0443\u0440\u043d\u0430\u043b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439"}),Object(U.jsx)(ut,{dividers:!0,children:Object(U.jsx)(Ue,{items:this.state.logItems})}),Object(U.jsxs)(nt,{children:[Object(U.jsx)(W,{loading:this.state.okLoading,onClick:this.props.onClosed,title:"\u043e\u043a"}),Object(U.jsx)(W,{loading:this.state.cancelPending,disabled:!this.state.okLoading,onClick:this.cancelWork,title:"\u043e\u0442\u043c\u0435\u043d\u0430"})]})]})})}}]),u}(s.a.Component),at=u(270),st=u.n(at),it=u(594),ct=u(271);function ot(e){var t=e.loading,u=e.onSubmit,n=Object(a.useState)(""),r=Object(M.a)(n,2),s=r[0],i=r[1],c=Object(a.useState)(null),o=Object(M.a)(c,2),D=o[0],l=o[1];return Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=Object(ct.a)(/d\/([\x2D0-9A-Z_a-z]+)\/edit(#gid=([0-9]+))?/,{spreadsheetId:1,sheetId:3}),n=s.match(t);if(!(null===n||void 0===n?void 0:n.groups)||!n.groups.spreadsheetId)return l("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 url-\u0430\u0434\u0440\u0435\u0441."),null;var r=n.groups.spreadsheetId,a=n.groups.sheetId||null;u(r,a)},className:"vertical-margin-min",children:[Object(U.jsx)(L.a,{name:"table-url",label:"\u0421\u0441\u044b\u043b\u043a\u0430 \u0432\u0438\u0434\u0430 https://docs.google.com/spreadsheets/d/sjwa1/edit#gid=0",type:"text",className:"tableUrl",value:s,onChange:function(e){var t=e.target;D&&l(null),i(t.value)},error:!!D,helperText:D,required:!0}),Object(U.jsx)(W,{title:"\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",loading:t,className:"submit"}),Object(U.jsx)("a",{href:p,target:"_blank",rel:"noreferrer",className:"button-link",children:"\u041f\u0440\u0438\u043c\u0435\u0440 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0434\u043b\u044f \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0430 \u0432 \u0411\u0420\u0421"})]})}!function(e){e[e.None=0]="None",e[e.LoadDisciplines=1]="LoadDisciplines",e[e.RunWork=2]="RunWork"}(et||(et={}));var Dt=function(e){Object(S.a)(u,e);var t=Object(w.a)(u);function u(e){var n;return Object(l.a)(this,u),(n=t.call(this,e)).marksDatas=[],n.workerSaveMode=!1,n.spreadsheetId="",n.sheetId=null,n.loadDisciplines=function(){var e=Object(b.a)(C.a.mark((function e(t,u){var r,a,s,i,c,o,D,l,d;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.spreadsheetId=t,n.sheetId=u,n.setState({loading:!0}),e.next=5,n.getActualSpreadsheetDataAsync(t,u);case 5:if((null===(r=e.sent)||void 0===r?void 0:r.datas)&&0!==r.datas.length){e.next=9;break}return n.setState({loading:!1}),e.abrupt("return",!1);case 9:n.marksDatas=[],a=[],s=!0,i=0,c=Object($.a)(r.datas),e.prev=14,c.s();case 16:if((o=c.n()).done){e.next=31;break}return D=o.value,e.next=20,n.getActualDisciplinesAsync(D.disciplineConfig);case 20:if(l=e.sent){e.next=24;break}return n.setState({loading:!1}),e.abrupt("return",!1);case 24:n.marksDatas.push({spreadsheetData:D,suitableDisciplines:l}),d=n.disciplinesToListItems(l,D),s=s&&d.allMissed,i+=d.missedCount,a.push.apply(a,Object(Q.a)(d.disciplines));case 29:e.next=16;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(14),c.e(e.t0);case 36:return e.prev=36,c.f(),e.finish(36);case 39:return n.setState({loading:!1,disciplines:a,showDisciplines:!0,lastAction:et.LoadDisciplines,allDisciplinesMissed:s,missedDisciplinesCount:i,showWorkerButtons:!s}),e.abrupt("return",!s);case 41:case"end":return e.stop()}}),e,null,[[14,33,36,39]])})));return function(t,u){return e.apply(this,arguments)}}(),n.updateCachedDisciplines=function(e){e.preventDefault(),n.setState({showDisciplines:!1});var t,u=Object($.a)(n.marksDatas);try{for(u.s();!(t=u.n()).done;){var r,a=null===(r=t.value.spreadsheetData)||void 0===r?void 0:r.disciplineConfig;if(!a)return;n.props.brsApi.clearDisciplineCacheAsync(a.year,a.termType,a.course,a.isModule).then((function(e){return e}),(function(e){n.props.onError(e)}))}}catch(s){u.e(s)}finally{u.f()}n.loadDisciplines(n.spreadsheetId,n.sheetId)},n.runWork=function(){var e=Object(b.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.lastAction===et.LoadDisciplines){e.next=6;break}return e.next=3,n.loadDisciplines(n.spreadsheetId,n.sheetId);case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:n.workerSaveMode=t,n.setState({lastAction:et.RunWork,runWorker:!0});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleRunWorkSafe=function(){return n.runWork(!1)},n.handleRunWorkUnsafe=function(){return n.runWork(!0)},n.handleWorkerClosed=function(){return n.setState({runWorker:!1})},n.state={tableUrl:"",loading:!1,showDisciplines:!1,lastAction:et.None,tableUrlError:{error:!1,message:""},disciplines:[],allDisciplinesMissed:!1,missedDisciplinesCount:0,showWorkerButtons:!1,runWorker:!1},n}return Object(d.a)(u,[{key:"disciplinesToListItems",value:function(e,t){var u=Array.from(new Set(t.actualStudents.map((function(e){return e.groupName||""})))),n=Array.from(new Set(e.map((function(e){return e.group})))),r=0,a=u.map((function(e){if(e.length>0){var t=ue(e),u=n.filter((function(e){return ue(e).startsWith(t)}));return 0===u.length?(r++,[{title:e,colored:!0}]):u.map((function(e){return{title:e,colored:!1}}))}return 0===n.length?(r++,[{title:"\u0410\u0432\u0442\u043e\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u2192 \u043d\u0435\u0442 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432",colored:!0}]):n.map((function(e){return{title:"\u0410\u0432\u0442\u043e\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u2192 ".concat(e),colored:!1}}))})).flat(),s=t.disciplineConfig,i=s.termType===Y.Fall?"\u043e\u0441\u0435\u043d\u044c ".concat(s.year):s.termType===Y.Spring?"\u0432\u0435\u0441\u043d\u0430 ".concat(s.year+1):"".concat(s.year,"/").concat(s.year+1),c="".concat(s.name,", ").concat(i,", ").concat(s.course," \u043a\u0443\u0440\u0441");return{allMissed:r===u.length,missedCount:r,disciplines:[{title:c,nestedItems:a}]}}},{key:"getActualDisciplinesAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t){var u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.brsApi.getDisciplineCachedAsync(t.year,t.termType,t.course,t.isModule);case 3:return u=e.sent,e.abrupt("return",u.filter((function(e){return ne(e.discipline,t.name)})));case 7:e.prev=7,e.t0=e.catch(0),this.props.onError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getActualSpreadsheetDataAsync",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSheetName(t,u);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.prev=5,a=new Fe(t),e.next=9,a.getSpreadsheetDataAsync(n);case 9:r=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(5),this.props.onError(e.t0.message||JSON.stringify(e.t0)),e.abrupt("return",null);case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t,u){return e.apply(this,arguments)}}()},{key:"getSheetName",value:function(){var e=Object(b.a)(C.a.mark((function e(t,u){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te(t).getMetaAsync();case 3:if(n=e.sent,r=n.sheets.map((function(e){return e.properties})),a=u?r.filter((function(e){return e.sheetId.toString()===u}))[0]:r[0]){e.next=9;break}return this.props.onError("\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"),e.abrupt("return",null);case 9:return e.abrupt("return",a.title);case 12:return e.prev=12,e.t0=e.catch(0),this.props.onError(e.t0.message||JSON.stringify(e.t0)),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t,u){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(U.jsxs)("span",{className:"spreadsheet-fetch",children:[Object(U.jsx)("h3",{className:"vertical-margin-min",children:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043b\u0438\u0441\u0442 Google \u0422\u0430\u0431\u043b\u0438\u0446\u044b \u0441 \u043e\u0446\u0435\u043d\u043a\u0430\u043c\u0438"}),Object(U.jsx)(ot,{loading:this.state.loading,onSubmit:this.loadDisciplines}),Object(U.jsxs)(Me.a,{in:this.state.showDisciplines,className:"vertical-margin-min",children:[Object(U.jsx)("h3",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b \u0438\u0437 Google \u0422\u0430\u0431\u043b\u0438\u0446\u044b"}),this.state.missedDisciplinesCount>0&&Object(U.jsxs)("p",{children:["\u0413\u0440\u0443\u043f\u043f\u044b, \u043a \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0443 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0432 \u0411\u0420\u0421,"," ",Object(U.jsx)("b",{className:"colored-text",children:" \u043f\u043e\u0434\u0441\u0432\u0435\u0447\u0435\u043d\u044b"})]}),Object(U.jsx)(Ue,{items:this.state.disciplines,icons:[Object(U.jsx)(it.a,{}),Object(U.jsx)(st.a,{})]}),this.state.allDisciplinesMissed?Object(U.jsxs)(s.a.Fragment,{children:[Object(U.jsx)("p",{children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043d\u0438 \u043a \u043e\u0434\u043d\u043e\u0439 \u0438\u0437 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u044b\u0445 \u0433\u0440\u0443\u043f\u043f \u0432 \u0411\u0420\u0421"}),Object(U.jsx)("span",{children:"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f:"}),Object(U.jsxs)("ol",{className:"no-margin",children:[Object(U.jsx)("li",{children:"\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b \u0432 \u0411\u0420\u0421 \u0438 \u0432 Google \u0422\u0430\u0431\u043b\u0438\u0446\u0430\u0445 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442"}),Object(U.jsx)("li",{children:"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u0435 \u0434\u043e\u0441\u0442\u0443\u043f \u043d\u0430 \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0443 \u0432 \u0411\u0420\u0421"}),Object(U.jsx)("li",{children:"\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u0442\u0435\u0445\u043a\u0430\u0440\u0442\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0430 \u0432 \u0411\u0420\u0421"}),Object(U.jsx)("li",{children:Object(U.jsx)("button",{className:"button-link",onClick:this.updateCachedDisciplines,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u043a\u044d\u0448 \u0433\u0440\u0443\u043f\u043f"})})]})]}):Object(U.jsxs)(s.a.Fragment,{children:[Object(U.jsxs)("p",{children:["\u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043d\u0435 \u0432\u0441\u0435 \u0433\u0440\u0443\u043f\u043f\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u0430\u043c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0432 \u0411\u0420\u0421, \u0442\u043e"," ",Object(U.jsx)("button",{className:"button-link",onClick:this.updateCachedDisciplines,children:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u043a\u044d\u0448 \u0433\u0440\u0443\u043f\u043f"})]}),Object(U.jsx)(I.a,{className:"vertical-margin-medium",children:Object(U.jsx)(Ge,{enabled:this.state.showWorkerButtons,onRunWorkSafe:this.handleRunWorkSafe,onRunWorkUnsafe:this.handleRunWorkUnsafe})})]})]}),this.state.runWorker&&Object(U.jsx)(rt,{marksDatas:this.marksDatas,onClosed:this.handleWorkerClosed,brsApi:this.props.brsApi,onError:this.props.onError,save:this.workerSaveMode})]})}}]),u}(s.a.Component),lt=Object(a.memo)(Dt),dt=u(595),pt=u(596),Ft=s.a.forwardRef((function(e,t){return Object(U.jsx)(dt.a,Object(z.a)({direction:"up",ref:t},e))}));function ht(e){var t=e.open,u=e.sessionName,n=e.onOk;return Object(U.jsx)(s.a.Fragment,{children:Object(U.jsxs)(ze.a,{open:t,TransitionComponent:Ft,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(U.jsx)(Je.a,{id:"alert-dialog-slide-title",children:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(U.jsx)(qe.a,{children:Object(U.jsxs)(pt.a,{id:"alert-dialog-slide-description",children:["\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u0438 ",u," \u0438\u0441\u0442\u0435\u043a\u043b\u043e.",Object(U.jsx)("br",{}),"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f."]})}),Object(U.jsx)(Xe.a,{style:{display:"flex",justifyContent:"space-around"},children:Object(U.jsx)(N.a,{onClick:n,color:"primary",children:"\u041e\u043a"})})]})})}u(540);function ft(){return Object(U.jsx)("div",{className:"loading-pane",children:Object(U.jsx)(T.a,{size:100,className:"progress"})})}var Ct=function(e){Object(S.a)(u,e);var t=Object(w.a)(u);function u(e){var n;return Object(l.a)(this,u),(n=t.call(this,e)).handleError=function(e){var t=e.message||JSON.stringify(e);e.statusCode?e.statusCode===r.BrsUnauthorized?n.handleSessionExpired("\u0411\u0420\u0421"):n.handleSessionExpired("Google"):"RequestError"===e.name?n.setState({errorMessage:"\u0412 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."}):n.setState({errorMessage:t})},n.handleSessionExpired=function(e){n.setState({openSessionExpiredAlert:!0,sessionName:e,loading:!1})},n.handleSessionExpiredOk=function(){"\u0411\u0420\u0421"===n.state.sessionName?(n.props.brsAuth.logout(),n.returnToLoginPage(),n.setState({redirect:!0})):"Google"===n.state.sessionName&&n.returnToLoginPage()},n.closeError=function(){n.setState({errorMessage:""})},n.returnToLoginPage=function(){n.setState({redirect:!0})},n.state={showControls:!1,runWork:!1,openSessionExpiredAlert:!1,sessionName:"",errorMessage:"",loading:!0,redirect:!1},n}return Object(d.a)(u,[{key:"componentDidMount",value:function(){var e=Object(b.a)(C.a.mark((function e(){var t=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.googleAuth.ensureInitializedAsync();case 2:return e.next=4,this.props.brsAuth.tryRestoreAsync();case 4:this.props.brsAuth.checkAuth()||this.handleSessionExpired("\u0411\u0420\u0421"),this.props.googleAuth.checkAuthorized()?this.setState({loading:!1}):setTimeout((function(){t.props.googleAuth.checkAuthorized()?t.setState({loading:!1}):t.handleSessionExpired("Google")}),1e3);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(U.jsxs)(s.a.Fragment,{children:[this.state.loading&&Object(U.jsx)(ft,{}),Object(U.jsx)(ht,{open:this.state.openSessionExpiredAlert,sessionName:this.state.sessionName,onOk:this.handleSessionExpiredOk}),this.state.errorMessage&&Object(U.jsx)(X,{open:!!this.state.errorMessage,message:this.state.errorMessage,type:"error",onClose:this.closeError}),this.state.redirect&&Object(U.jsx)(D.a,{to:"/"}),Object(U.jsx)("div",{className:"work-page",children:Object(U.jsxs)(I.a,{maxWidth:"md",children:[Object(U.jsx)(N.a,{variant:"contained",style:{marginTop:10},onClick:this.returnToLoginPage,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432\u0445\u043e\u0434\u0430"}),Object(U.jsx)(lt,{brsApi:this.props.brsApi,onError:this.handleError})]})})]})}}]),u}(s.a.Component);function bt(){return Object(U.jsx)(B.Consumer,{children:function(e){return e&&Object(U.jsx)(Ct,{brsAuth:e.brsAuth,brsApi:e.brsApi,googleAuth:e.googleAuth})}})}var vt=new h(!0),mt=new j(vt),gt=new ee(mt,vt),Et=new O;function At(){return Object(U.jsx)(B.Provider,{value:{brsAuth:mt,brsApi:gt,googleAuth:Et},children:Object(U.jsx)(o.a,{hashType:"noslash",children:Object(U.jsxs)(D.d,{children:[Object(U.jsx)(D.b,{path:"/work",component:bt}),Object(U.jsx)(D.b,{exact:!0,path:"",component:Z})]})})})}var yt=function(e){e&&e instanceof Function&&u.e(3).then(u.bind(null,602)).then((function(t){var u=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;u(e),n(e),r(e),a(e),s(e)}))};u(541);c.a.render(Object(U.jsx)(At,{}),document.getElementById("root")),yt()}},[[542,1,2]]]);
//# sourceMappingURL=main.e9790dc5.chunk.js.map