(this["webpackJsonpbrs-extensions"]=this["webpackJsonpbrs-extensions"]||[]).push([[0],{207:function(e,t,n){},235:function(e,t){},237:function(e,t){},247:function(e,t){},249:function(e,t){},274:function(e,t){},276:function(e,t){},277:function(e,t){},283:function(e,t){},285:function(e,t){},303:function(e,t){},305:function(e,t){},317:function(e,t){},320:function(e,t){},325:function(e,t){},327:function(e,t){},350:function(e,t){},445:function(e,t,n){"use strict";n.r(t);var r,o,a=n(3),i=n(37),c=n.n(i),s=n(201),u=n.n(s),l=(n(207),n(2)),d=n.n(l),p=n(10),f=n(45),h=(n(16),n(44)),b=(n(109),n(108)),g=n.n(b),j="https://brs-proxy.herokuapp.com/brs/https://brs.urfu.ru/mrd",m="null";function v(e){m=e}function y(e,t,n,r){return x.apply(this,arguments)}function x(){return(x=Object(p.a)(d.a.mark((function e(t,n,r,o){var a,i,c,s,u,l,p,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="?year=".concat(t,"&termType=").concat(n,"&course=").concat(r,"&total=0&page=1&pageSize=1000&search="),!o){e.next=10;break}return e.next=4,S("/mvc/mobile/module/fetch"+a);case 4:i=e.sent,c=Object(h.a)(i);try{for(c.s();!(s=c.n()).done;)s.value.isModule=!0}catch(d){c.e(d)}finally{c.f()}return e.abrupt("return",i);case 10:return e.next=12,S("/mvc/mobile/discipline/fetch"+a);case 12:u=e.sent,l=u.content,p=Object(h.a)(l);try{for(p.s();!(f=p.n()).done;)f.value.isModule=!1}catch(d){p.e(d)}finally{p.f()}return e.abrupt("return",l);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(d.a.mark((function e(t,n){var r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({url:j+"/login",method:"POST",body:"username=".concat(t,"&password=").concat(n),resolveWithFullResponse:!0,simple:!1,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});case 2:if("set-cookie"in(r=e.sent).headers){e.next=5;break}throw new Error("Wrong credentials");case 5:return o=r.headers["set-cookie"].filter((function(e){return e.startsWith("JSESSIONID=")}))[0],e.abrupt("return",o.split(";")[0].substr("JSESSIONID=".length).trim());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n){return I.apply(this,arguments)}function I(){return(I=Object(p.a)(d.a.mark((function e(t,n,r){var o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t,n,r);case 2:if(!(o=e.sent).trimLeft().startsWith("<!DOCTYPE html>")){e.next=5;break}throw new Error(t+" is Forbidden");case 5:return e.abrupt("return",JSON.parse(o));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,n){return N.apply(this,arguments)}function N(){return(N=Object(p.a)(d.a.mark((function e(t,n,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}throw new Error("Not authenticated. Use authByConfigAsync or authAsync to authenticate");case 2:return console.log("Sid:",m),e.abrupt("return",g()(Object(f.a)(Object(f.a)({method:"GET"},n),{},{url:j+t,headers:Object(f.a)({"X-Cookie":"JSESSIONID=".concat(m),"X-Requested-With":"XMLHttpRequest"},r)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.NoFailure=-1]="NoFailure",e[e.NotChosen=-19]="NotChosen",e[e.NotAllowedByDeansOffice=-18]="NotAllowedByDeansOffice",e[e.NotAppeared=0]="NotAppeared",e[e.DisrespectfulReason=12]="DisrespectfulReason",e[e.RespectfulReason=13]="RespectfulReason",e[e.NotAllowedByTeacher=18]="NotAllowedByTeacher",e[e.ShouldNotPass=19]="ShouldNotPass",e[e.AcademicLeave=20]="AcademicLeave",e[e.DroppedOut=21]="DroppedOut"}(r||(r={})),function(e){e[e.Fall=1]="Fall",e[e.Spring=2]="Spring"}(o||(o={}));var B,C;function E(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",id:"login",placeholder:"Login"}),Object(a.jsx)("input",{type:"password",id:"password",placeholder:"Password"}),Object(a.jsx)("input",{type:"button",value:"Login",onClick:A}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"button",id:"loadBrsBtn",value:"Load BRS",onClick:T,disabled:!0}),Object(a.jsx)("label",{id:"brs-response",children:"Available discipline:"})]})}function A(){return F.apply(this,arguments)}function F(){return(F=Object(p.a)(d.a.mark((function e(){var t,n,r,o,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(t=document.getElementById("login"))||void 0===t?void 0:t.value,o=null===(n=document.getElementById("password"))||void 0===n?void 0:n.value,console.log(r,o),a=document.getElementById("loadBrsBtn"),r&&o&&a){e.next=7;break}return alert("No data"),e.abrupt("return");case 7:O(r,o).then((function(e){alert(e),localStorage.setItem("sid",e),a.removeAttribute("disabled")}),(function(){return alert("Wrong login or password")}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("sid")){e.next=4;break}return alert("No sid!"),e.abrupt("return");case 4:return v(t),e.next=7,y(2019,o.Fall,2,!1);case 7:n=e.sent,(r=document.getElementById("brs-response"))&&(r.innerText+=n[0].discipline);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=["https://sheets.googleapis.com/$discovery/rest?version=v4"];function R(){!function(){var e=localStorage.getItem("google_api_key");if(!e)throw"No google api key found";C=e;var t=localStorage.getItem("google_client_id");if(!t)throw"No google client id";B=t}(),gapi.load("client:auth2",_)}function _(){gapi.client.init({apiKey:C,clientId:B,discoveryDocs:L,scope:"https://www.googleapis.com/auth/spreadsheets"}).then((function(){if(P.onSignInStatusChanged){var e=gapi.auth2.getAuthInstance().isSignedIn;e.listen(P.onSignInStatusChanged),P.onSignInStatusChanged(e.get())}}),P.onError)}function z(){throw"Not initialized"}function M(){throw"Not initialized"}var P={onError:alert},J="1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",W="Class data",U="A1:F";function V(){return Object(a.jsxs)("div",{className:"spreadsheet-form",children:[Object(a.jsx)("button",{id:"init",onClick:X,children:"Init"}),Object(a.jsx)("button",{id:"authorize_button",onClick:z,disabled:!0,children:"Authorize"}),Object(a.jsx)("button",{id:"signout_button",onClick:M,style:{display:"none"},children:"Sign Out"}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Spreadsheet id "}),Object(a.jsx)("input",{type:"text",id:"sprId",defaultValue:J,onBlur:function(e){return J=e.target.value}}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Sheet name "}),Object(a.jsx)("input",{type:"text",id:"sheetName",defaultValue:W,onBlur:function(e){return W=e.target.value}}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Range "}),Object(a.jsx)("input",{type:"text",id:"range",defaultValue:U,onBlur:function(e){return U=e.target.value}}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:H,children:"Load table"}),Object(a.jsx)("button",{onClick:K,children:"Clear"}),Object(a.jsx)("p",{className:"spreadsheet-name",id:"spreadsheet-name",children:"Spreadsheet name"}),Object(a.jsx)("div",{className:"response-field",id:"table"})]})}function X(){R();var e=document.getElementById("authorize_button");e&&e.removeAttribute("disabled");var t=document.getElementById("init");t&&(t.style.display="none")}function q(e,t){var n=document.createElement("div");n.innerText=e,t&&t.appendChild(n)}function H(){console.log("Load ".concat(U," from ").concat(W," from ").concat(J));var e=document.getElementById("table");gapi.client.sheets.spreadsheets.values.get({spreadsheetId:J,range:"".concat(W,"!").concat(U)}).then((function(t){var n=t.result;if(n.values.length>0){var r,o=Object(h.a)(n.values);try{for(o.s();!(r=o.n()).done;){q(r.value.join(" | "),e)}}catch(a){o.e(a)}finally{o.f()}}else q("No data found.",e)}),(function(e){alert(e.result.error.message)}))}function K(){var e=document.getElementById("table");e&&(e.innerHTML="")}P.onSignInStatusChanged=function(e){var t=document.getElementById("authorize_button"),n=document.getElementById("signout_button");t&&n&&(console.log("SignIn: ".concat(e)),t.style.display=e?"none":"block",n.style.display=e?"block":"none")};var G=function(){return Object(a.jsxs)("div",{className:"wrapper",children:[Object(a.jsx)(E,{}),Object(a.jsx)("br",{}),Object(a.jsx)(V,{})]})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,446)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),a(e),i(e)}))};u.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(G,{})}),document.getElementById("root")),Y()}},[[445,1,2]]]);
//# sourceMappingURL=main.542fc6da.chunk.js.map