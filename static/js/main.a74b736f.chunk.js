(this["webpackJsonpbrs-extensions"]=this["webpackJsonpbrs-extensions"]||[]).push([[0],{323:function(e,t){},325:function(e,t){},335:function(e,t){},337:function(e,t){},362:function(e,t){},364:function(e,t){},365:function(e,t){},371:function(e,t){},373:function(e,t){},391:function(e,t){},393:function(e,t){},405:function(e,t){},408:function(e,t){},413:function(e,t){},415:function(e,t){},438:function(e,t){},533:function(e,t,n){},534:function(e,t,n){},540:function(e,t,n){},541:function(e,t,n){},542:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),s=n.n(a),i=n(16),o=n.n(i),c=n(124),u=n(27),l=n(25),d=n(20),h="https://brs.urfu.ru/mrd",p=function(){function e(t){Object(l.a)(this,e),this.withProxy=void 0,this.withProxy=t}return Object(d.a)(e,[{key:"baseUrl",get:function(){return this.withProxy?"".concat("https://kamikoto-cors-proxy.herokuapp.com","/").concat(h):h}}]),e}(),f=n(5),b=n.n(f),g=n(8),v=n(125),m=n.n(v),j={};function y(e,t){if(!t)return!1;var n=JSON.stringify(t);return localStorage.setItem(e,n),j[e]=t,!0}function x(e){var t=j[e];if(t)return t;var n=localStorage.getItem(e);if(!n)return null;var r=JSON.parse(n);return r?(j[e]=r,r):null}var O=function(){function e(t){Object(l.a)(this,e),this.brsUrlProvider=void 0,this._sid=null,this._login=null,this.brsUrlProvider=t,this.tryLoadLoginInfoFromCache()}return Object(d.a)(e,[{key:"checkAuth",value:function(){return!(!this._sid||!this._login)}},{key:"loginAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n){var r,a,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestSidAsync(t,n);case 2:if((r=e.sent)&&"x-set-cookie"in r.headers){e.next=5;break}return e.abrupt("return",!1);case 5:if(a=r.headers["x-set-cookie"],s=a.match(/(?<=JSESSIONID=)\w+/)){e.next=9;break}return e.abrupt("return",!1);case 9:return i=s[0],this.saveLoginInfo(i,t),e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"authBySidAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return y("loginInfo",{sid:t,login:"SESSION"}),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveLoginInfo",value:function(e,t){y("loginInfo",{sid:e,login:t}),this._sid=e,this._login=t}},{key:"logout",value:function(){var e;this._sid=null,this._login=null,e="loginInfo",localStorage.removeItem(e),delete j[e]}},{key:"requestSidAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:this.brsUrlProvider.baseUrl+"/login",method:"POST",body:"username=".concat(t,"&password=").concat(n),resolveWithFullResponse:!0,simple:!1,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then((function(e){return e}),(function(){return null}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadLoginInfoFromCache",value:function(){if(!this.tryLoadLoginInfoFromCache())throw new Error("BRS unauthorized")}},{key:"tryLoadLoginInfoFromCache",value:function(){var e=x("loginInfo");return!!e&&(this._sid=e.sid,this._login=e.login,!0)}},{key:"sid",get:function(){return this._sid||this.loadLoginInfoFromCache(),this._sid}},{key:"login",get:function(){return this._login||this.loadLoginInfoFromCache(),this._login}}]),e}(),k=Object(a.createContext)(),A=n(32),w=n(56),S=n(72),C=(n(533),n(584)),I=n(585),M=n(610),N=n(576),F=n(580);n(534);function L(e){var t=e.title,n=e.loading,a=e.className,s=e.onClick,i=e.disabled,o=void 0!==i&&i;return Object(r.jsxs)("div",{className:"submit-with-loading "+a,children:[Object(r.jsx)(N.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:s,disabled:n||o,children:t}),n&&Object(r.jsx)(F.a,{color:"secondary",size:24,className:"button-progress"})]})}var T=n(276),D=n.n(T);function U(e){var t=e.onSignedIn,n=e.onFailure;return Object(r.jsx)(D.a,{clientId:"122993083593-pacve8csj86voko30ia65raeg0ncrtuv.apps.googleusercontent.com",buttonText:"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 Google",onSuccess:t,onFailure:n,scope:"profile email https://www.googleapis.com/auth/spreadsheets",isSignedIn:!0})}var E=n(605),W=n(608);function P(e){var t=e.open,n=e.message,a=e.type,i=e.onClose;return Object(r.jsx)(s.a.Fragment,{children:Object(r.jsx)(W.a,{open:t,autoHideDuration:1e4,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:i,children:Object(r.jsx)(H,{severity:a,onClose:i,children:n})})})}function H(e){return Object(r.jsx)(E.a,Object(A.a)({elevation:6,variant:"filled"},e))}var R=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).handleUsernameChanged=function(e){var t=e.target.value;r.setState({credentials:Object(A.a)(Object(A.a)({},r.state.credentials),{},{username:t,sid:""})})},r.handlePasswordChanged=function(e){var t=e.target.value;r.setState({credentials:Object(A.a)(Object(A.a)({},r.state.credentials),{},{password:t,sid:""})})},r.handleSidChanged=function(e){var t=e.target.value;r.setState({credentials:Object(A.a)(Object(A.a)({},r.state.credentials),{},{sid:t,username:"",password:""})})},r.handleBrsSubmit=function(){var e=Object(g.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r.setState({submitLoading:!0}),e.next=4,r.loginBrsAsync();case 4:n=e.sent,r.setState({submitLoading:!1}),n?r.setState({alertMessage:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e",openAlert:!0,alertType:"success",brsAuthorized:!0}):r.setState({alertMessage:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :( \n \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435",openAlert:!0,alertType:"error"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.loginBrsAsync=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=r.state.credentials).sid){e.next=5;break}return e.next=4,r.props.brsAuth.authBySidAsync(t.sid);case 4:return e.abrupt("return",e.sent);case 5:if(!t.username||!t.password){e.next=9;break}return e.next=8,r.props.brsAuth.loginAsync(t.username,t.password);case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)}))),r.handleCloseAlert=function(){r.setState({openAlert:!1})},r.handleGoogleSignedIn=function(){r.setState({googleAuthorized:!0})},r.handleGoogleLoginFailed=function(e){console.error(e),r.setState({openAlert:!0,alertType:"error",alertMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0412\u0430\u0448 Google \u0430\u043a\u043a\u0430\u0443\u043d\u0442 :("})},r.startWork=function(){r.setState({redirect:!0})},r.state={credentials:{username:"",password:"",sid:""},brsAuthorized:e.brsAuth.checkAuth(),googleAuthorized:!1,redirect:!1,submitLoading:!1,openAlert:!1,alertMessage:"",alertType:"error"},r}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state.credentials;return Object(r.jsxs)("div",{className:"login-page",children:[this.state.redirect&&Object(r.jsx)(u.a,{to:"/brs-extensions/work"}),Object(r.jsxs)(C.a,{component:"main",maxWidth:"md",children:[Object(r.jsx)("h1",{children:"\u041f\u0440\u0438\u0432\u0435\u0442!"}),Object(r.jsx)("h3",{children:"\u041a\u0430\u043a \u0432\u0441\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442"}),Object(r.jsx)("p",{children:"\u041a\u0430\u043a-\u0442\u043e \u0432\u0441\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442"}),Object(r.jsx)("h3",{children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445"}),Object(r.jsx)("p",{children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432 localstorage"}),Object(r.jsx)("hr",{}),Object(r.jsx)("p",{children:"\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0440\u0430\u0431\u043e\u0442\u044b, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0411\u0420\u0421"}),Object(r.jsxs)(I.a,{container:!0,justify:"space-around",children:[Object(r.jsx)(I.a,{item:!0,md:5,lg:5,sm:5,xs:10,children:Object(r.jsxs)("form",{className:"form",onSubmit:this.handleBrsSubmit,children:[Object(r.jsx)(M.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"username",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",name:"username",autoFocus:!0,value:e.username,onChange:this.handleUsernameChanged}),Object(r.jsx)(M.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",value:e.password,onChange:this.handlePasswordChanged}),Object(r.jsx)("p",{className:"text-center",children:"\u0438\u043b\u0438"}),Object(r.jsx)(M.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"sid",label:"JSESSIONID",type:"password",id:"sid",value:e.sid,onChange:this.handleSidChanged}),Object(r.jsx)(L,{title:"\u0432\u043e\u0439\u0442\u0438",loading:this.state.submitLoading})]})}),Object(r.jsx)(I.a,{item:!0,className:"align-center",children:Object(r.jsx)("h3",{children:"\u0410 \u0442\u0430\u043a\u0436\u0435"})}),Object(r.jsxs)(I.a,{item:!0,className:"align-center",children:[Object(r.jsx)(U,{onSignedIn:this.handleGoogleSignedIn,onFailure:this.handleGoogleLoginFailed}),Object(r.jsx)("br",{})]})]}),Object(r.jsx)(C.a,{className:"start-work-wrapper",children:Object(r.jsx)(N.a,{variant:"contained",onClick:this.startWork,disabled:!this.state.brsAuthorized||!this.state.googleAuthorized,color:"secondary",children:"\u043d\u0430\u0447\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443"})}),Object(r.jsx)(P,{open:this.state.openAlert,message:this.state.alertMessage,type:this.state.alertType,onClose:this.handleCloseAlert})]})]})}}]),n}(s.a.Component),_=function(){return Object(r.jsx)(k.Consumer,{children:function(e){return Object(r.jsx)(R,{brsAuth:e.brsAuth})}})},z=n(21),B=n(590),q=n(613),J=n(596),G=n(591),K=n(589),Z=n(543),X=n(592),Y=n(593),V=n(594),$=n(595),Q=n(278),ee=n.n(Q),te=n(277),ne=n.n(te),re=Object(B.a)((function(e){return Object(q.a)({root:{width:"100%",backgroundColor:e.palette.background.default},nested:{paddingLeft:e.spacing(4)},onEmptyMessage:{textAlign:"center"}})}));function ae(e){var t=e.title,n=e.items,a=e.collapsed,s=void 0===a||a,i=re(),o=Object(r.jsx)(G.a,{component:"div",id:"nested-list-subheader",hidden:!t,children:t});return Object(r.jsx)(K.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:o,className:i.root,children:n.length?se(n,s):Object(r.jsx)(Z.a,{className:i.onEmptyMessage,children:Object(r.jsx)(X.a,{primary:"No items"})})})}function se(e,t){return e.map((function(e,n){return Object(r.jsx)(ie,{item:e,collapsed:t},n)}))}function ie(e){var t=e.item,n=e.collapsed,a=s.a.useState(!n),i=Object(z.a)(a,2),o=i[0],c=i[1],u=t.title,l=t.nestedItems,d=l&&l.length>0;return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsxs)(Z.a,{button:!0,onClick:function(){return c(!o)},children:[Object(r.jsx)(Y.a,{children:Object(r.jsx)(ne.a,{})}),Object(r.jsx)(X.a,{primary:u}),d&&(o?Object(r.jsx)(V.a,{}):Object(r.jsx)($.a,{}))]}),null===l||void 0===l?void 0:l.map((function(e,t){return Object(r.jsx)(oe,Object(A.a)({},{index:t,open:o,nestedItemTitle:e}))}))]})}function oe(e){var t=e.index,n=e.nestedItemTitle,a=e.open,s=re();return Object(r.jsx)(J.a,{in:a,timeout:"auto",unmountOnExit:!0,children:Object(r.jsx)(K.a,{component:"div",className:s.nested,disablePadding:!0,children:Object(r.jsxs)(Z.a,{button:!0,children:[Object(r.jsx)(Y.a,{children:Object(r.jsx)(ee.a,{})}),Object(r.jsx)(X.a,{primary:n})]})})},t)}var ce,ue,le=n(23),de=n(29),he=(n(178),function(){function e(t,n){Object(l.a)(this,e),this.brsAuth=void 0,this.brsUrlProvider=void 0,this.brsAuth=t,this.brsUrlProvider=n}return Object(d.a)(e,[{key:"getDisciplineCachedAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r,a){var s,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s="".concat(this.brsAuth.login,"_getDiscipline_").concat(t,"_").concat(n,"_").concat(r,"_").concat(a),!(i=x(s))){e.next=4;break}return e.abrupt("return",i);case 4:return e.next=6,this.getDisciplineInternalAsync(t,n,r,a);case 6:return o=e.sent,y(s,o),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getDisciplineInternalAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r,a){var s,i,o,c,u,l,d,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s="?year=".concat(t,"&termType=").concat(n,"&course=").concat(r,"&total=0&page=1&pageSize=1000&search="),!a){e.next=10;break}return e.next=4,this.requestApiJsonAsync("/mvc/mobile/module/fetch"+s);case 4:i=e.sent,o=Object(de.a)(i);try{for(o.s();!(c=o.n()).done;)c.value.isModule=!0}catch(p){o.e(p)}finally{o.f()}return e.abrupt("return",i);case 10:return e.next=12,this.requestApiJsonAsync("/mvc/mobile/discipline/fetch"+s);case 12:u=e.sent,l=u.content,d=Object(de.a)(l);try{for(d.s();!(h=d.n()).done;)h.value.isModule=!1}catch(p){d.e(p)}finally{d.f()}return e.abrupt("return",l);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getAllStudentMarksAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t){var n,r,a,s,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=[],e.t1=le.a,e.next=4,this.getStudentMarksAsync(t,"lecture","current");case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=le.a,e.next=9,this.getStudentMarksAsync(t,"lecture","intermediate");case 9:return e.t5=e.sent,e.t6=(0,e.t4)(e.t5),e.t7=le.a,e.next=14,this.getStudentMarksAsync(t,"laboratory","current");case 14:return e.t8=e.sent,e.t9=(0,e.t7)(e.t8),e.t10=le.a,e.next=19,this.getStudentMarksAsync(t,"laboratory","intermediate");case 19:e.t11=e.sent,e.t12=(0,e.t10)(e.t11),n=e.t0.concat.call(e.t0,e.t3,e.t6,e.t9,e.t12),r={},a=Object(de.a)(n);try{for(a.s();!(s=a.n()).done;)i=s.value,o=r[i.studentUuid]||{},r[i.studentUuid]=Object(A.a)(Object(A.a)({},o),i)}catch(c){a.e(c)}finally{a.f()}return e.abrupt("return",Object.keys(r).map((function(e){return r[e]})));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStudentMarksAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getStudentMarksInternalAsync(t.disciplineLoad,t.isModule,t.groupHistoryId,t.groupId,n,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getStudentMarksInternalAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r,a,s,i){var o,c,u,l=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l.length>6&&void 0!==l[6]&&l[6],c=l.length>7&&void 0!==l[7]&&l[7],u=n?"techgroup=".concat(a):"groupUuid=".concat(r),e.abrupt("return",this.requestApiJsonAsync("/mvc/mobile/studentMarks/fetch?disciplineLoad=".concat(t,"&").concat(u)+"&cardType=".concat(s,"&hasTest=false&isTotal=").concat(o)+"&intermediate=".concat("intermediate"===i)+"&selectedTeachers=null&showActiveStudents=".concat(c)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,s,i){return e.apply(this,arguments)}}()},{key:"getAllControlActionsCachedAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=[],e.t1=le.a,e.next=4,this.getControlActionsCachedAsync(t,"lecture","current");case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=le.a,e.next=9,this.getControlActionsCachedAsync(t,"lecture","intermediate");case 9:return e.t5=e.sent,e.t6=(0,e.t4)(e.t5),e.t7=le.a,e.next=14,this.getControlActionsCachedAsync(t,"laboratory","current");case 14:return e.t8=e.sent,e.t9=(0,e.t7)(e.t8),e.t10=le.a,e.next=19,this.getControlActionsCachedAsync(t,"laboratory","intermediate");case 19:return e.t11=e.sent,e.t12=(0,e.t10)(e.t11),e.t13=le.a,e.next=24,this.getControlActionsCachedAsync(t,"practice","current");case 24:return e.t14=e.sent,e.t15=(0,e.t13)(e.t14),e.t16=le.a,e.next=29,this.getControlActionsCachedAsync(t,"practice","intermediate");case 29:return e.t17=e.sent,e.t18=(0,e.t16)(e.t17),e.t19=le.a,e.next=34,this.getControlActionsCachedAsync(t,"additionalPractice","current");case 34:return e.t20=e.sent,e.t21=(0,e.t19)(e.t20),e.t22=le.a,e.next=39,this.getControlActionsCachedAsync(t,"additionalPractice","intermediate");case 39:return e.t23=e.sent,e.t24=(0,e.t22)(e.t23),e.abrupt("return",e.t0.concat.call(e.t0,e.t3,e.t6,e.t9,e.t12,e.t15,e.t18,e.t21,e.t24));case 42:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getControlActionsCachedAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r){var a,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="".concat(this.brsAuth.login,"_getControlActions_").concat(t.disciplineLoad)+"_".concat(t.isModule,"_").concat(t.groupHistoryId,"_").concat(t.groupId,"_").concat(n,"_").concat(r),!(s=x(a))){e.next=4;break}return e.abrupt("return",s);case 4:return e.next=6,this.getControlActionsInternalAsync(t.disciplineLoad,t.isModule,t.groupHistoryId,t.groupId,n,r);case 6:return i=e.sent,y(a,i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getControlActionsInternalAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r,a,s,i){var o,c,u,l,d,h,p,f,g;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n?"/module":"",c=n?a:r,e.next=4,this.requestApiAsync("/mvc/mobile/view/mark/".concat(t,"/").concat(c,"/teachers").concat(o,"/").concat(s,"/").concat(i));case 4:if(u=e.sent,l="gridColumns = toTextArray(",d=");",1===(h=u.split("\r\n").map((function(e){return e.trim()})).filter((function(e){return e.startsWith(l)}))).length){e.next=10;break}throw new Error("Control actions page should contain single line target line with techcard identifier");case 10:return p=JSON.parse(h[0].substr(l.length,h[0].length-l.length-d.length))||[],f="technologyCard",g=p.filter((function(e){return e.uuid&&e.uuid.startsWith(f)})).map((function(e){return{uuid:e.uuid,uuidWithoutPrefix:e.uuid.substr(f.length),controlAction:e.controlAction}})),e.abrupt("return",g);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,s,i){return e.apply(this,arguments)}}()},{key:"putStudentMarkAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r,a,s,i){var o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="student=".concat(t,"&techcard=").concat(n,"&mark=").concat(isNaN(r)?"":r.toString(),"&groupId=").concat(a,"&cardTypeKey=").concat(s,"&disciplineLoadUuid=").concat(i),e.abrupt("return",this.requestApiJsonAsync("/mvc/mobile/studentMarks/put",{method:"POST",body:o,json:!1},{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,s,i){return e.apply(this,arguments)}}()},{key:"putStudentFailureAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n){var r,a,s,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:ce.NoFailure,a=i.length>3&&void 0!==i[3]?i[3]:"lecture",s="markFailure=".concat(r,"&cardType=").concat(a,"&disciplineLoad=").concat(n.disciplineLoad,"&studentId=").concat(t),e.next=5,this.requestApiAsync("/mvc/mobile/failure/update",{method:"POST",body:s,json:!1},{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"});case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateAllMarksAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateMarksAsync(t,"lecture","intermediate");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateMarksAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.updateMarksInternalAsync(t.disciplineLoad,t.isModule,t.groupHistoryId,t.groupId,n,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"updateMarksInternalAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r,a,s,i){var o,c,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n?"/module":"",c=n?"techgroup=".concat(a):"groupUuid=".concat(r),u="disciplineLoad=".concat(t,"&").concat(c)+"&cardType=".concat(s,"&hasTest=false&isTotal=false")+"&intermediate=".concat("intermediate"===i)+"&selectedTeachers=null&showActiveStudents=true",e.abrupt("return",this.requestApiAsync("/mvc/mobile/updateMarks".concat(o),{method:"POST",body:u,json:!1},{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,s,i){return e.apply(this,arguments)}}()},{key:"requestApiJsonAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestApiAsync(t,n,r);case 2:return a=e.sent,e.abrupt("return",JSON.parse(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"requestApiAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()(Object(A.a)(Object(A.a)({method:"GET"},n),{},{url:this.brsUrlProvider.baseUrl+t,headers:Object(A.a)({"X-Cookie":"JSESSIONID=".concat(this.brsAuth.sid),"X-Requested-With":"XMLHttpRequest"},r)}));case 2:if(!(a=e.sent).trimLeft().startsWith("<!DOCTYPE html>")){e.next=5;break}throw new Error(t+" is Forbidden");case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}());!function(e){e[e.NoFailure=-1]="NoFailure",e[e.NotChosen=-19]="NotChosen",e[e.NotAllowedByDeansOffice=-18]="NotAllowedByDeansOffice",e[e.NotAppeared=0]="NotAppeared",e[e.DisrespectfulReason=12]="DisrespectfulReason",e[e.RespectfulReason=13]="RespectfulReason",e[e.NotAllowedByTeacher=18]="NotAllowedByTeacher",e[e.ShouldNotPass=19]="ShouldNotPass",e[e.AcademicLeave=20]="AcademicLeave",e[e.DroppedOut=21]="DroppedOut"}(ce||(ce={})),function(e){e[e.Fall=1]="Fall",e[e.Spring=2]="Spring"}(ue||(ue={}));function pe(e){return e&&e.toLowerCase().replace("\u0451","\u0435").replace(/[^A-Za-z\u0410-\u042f\u0401\u0430-\u044f\u04510-9]/g,"")}function fe(e,t){return pe(e)===pe(t)}function be(e){return parseFloat(e&&e.replace(",","."))}var ge=n(588),ve=n(612),me=n(604),je=n(597),ye=n(598),xe=n(607),Oe=Object(B.a)((function(){return Object(q.a)({termType:{minWidth:100,marginRight:10},year:{width:60,marginRight:10},course:{width:50,marginRight:10},submit:{display:"inline-block",top:5},isModule:{marginTop:15}})})),ke=function(e){var t=e.loading,n=e.onSubmit,a=Oe(),i=s.a.useState(1),o=Object(z.a)(i,2),c=o[0],u=o[1],l=s.a.useState((new Date).getFullYear()),d=Object(z.a)(l,2),h=d[0],p=d[1],f=s.a.useState(function(){var e=(new Date).getMonth();return e>=9||e<=1?"\u041e\u0441\u0435\u043d\u043d\u0438\u0439":"\u0412\u0435\u0441\u0435\u043d\u043d\u0438\u0439"}()),b=Object(z.a)(f,2),g=b[0],v=b[1],m=s.a.useState(!1),j=Object(z.a)(m,2),y=j[0],x=j[1];function O(e){var t=e.target;switch(t.name){case"year":p(t.value);break;case"term-type":v(t.value);break;case"course":u(t.value);break;case"is-module":x(t.checked)}}return Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n({course:c,year:h,isModule:y,termType:g})},children:[Object(r.jsx)(M.a,{name:"year",className:a.year,label:"\u0413\u043e\u0434",type:"number",value:h,onChange:O,required:!0}),Object(r.jsxs)(ge.a,{className:a.termType,required:!0,children:[Object(r.jsx)(ve.a,{id:"term-label",children:"\u0421\u0435\u043c\u0435\u0441\u0442\u0440"}),Object(r.jsxs)(me.a,{name:"term-type",value:g,onChange:O,children:[Object(r.jsx)(je.a,{value:"\u041e\u0441\u0435\u043d\u043d\u0438\u0439",children:"\u041e\u0441\u0435\u043d\u043d\u0438\u0439"}),Object(r.jsx)(je.a,{value:"\u0412\u0435\u0441\u0435\u043d\u043d\u0438\u0439",children:"\u0412\u0435\u0441\u0435\u043d\u043d\u0438\u0439"})]})]}),Object(r.jsx)(M.a,{name:"course",className:a.course,label:"\u041a\u0443\u0440\u0441",type:"number",value:c,onChange:O,required:!0}),Object(r.jsx)(ye.a,{label:"\u041c\u043e\u0434\u0443\u043b\u044c",className:a.isModule,control:Object(r.jsx)(xe.a,{name:"is-module",color:"primary",value:y,onChange:O})}),Object(r.jsx)(L,{title:"\u0432\u044b\u0432\u0435\u0441\u0442\u0438",loading:t,className:a.submit})]})};var Ae=Object(B.a)((function(){return Object(q.a)({header:{marginBottom:10},disciplinesList:{marginTop:25}})}));function we(e){var t=e.brsApi,n=e.onUnauthorized,a=Ae(),i=s.a.useState(!1),o=Object(z.a)(i,2),c=o[0],u=o[1],l=s.a.useState([]),d=Object(z.a)(l,2),h=d[0],p=d[1],f=s.a.useState(!1),v=Object(z.a)(f,2),m=v[0],j=v[1];function y(){return(y=Object(g.a)(b.a.mark((function e(r){var a,s,i,o,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),a="\u041e\u0441\u0435\u043d\u043d\u0438\u0439"===r.termType?ue.Fall:ue.Spring,s=r.year,i=r.course,o=r.isModule,e.prev=3,e.next=6,t.getDisciplineCachedAsync(s,a,i,o);case 6:c=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),n("\u0411\u0420\u0421"),j(!1),e.abrupt("return");case 14:p(x(c)),j(!1),u(!0);case 17:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function x(e){return Object.entries((t=e,n="discipline",t.reduce((function(e,t){var r="".concat(t[n]);return(e[r]=e[r]||[]).push(t),e}),{}))).map((function(e){return{title:e[0],nestedItems:e[1].map((function(e){return e.group}))}}));var t,n}return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)("h3",{className:a.header,children:"\u0412\u044b\u0431\u0435\u0440\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u0443\u0440\u0441\u0430 \u0432 \u0411\u0420\u0421"}),Object(r.jsx)(ke,{loading:m,onSubmit:function(e){return y.apply(this,arguments)}}),Object(r.jsx)(J.a,{in:c,className:a.disciplinesList,children:Object(r.jsx)(ae,{title:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b",items:h})})]})}var Se=Object(a.memo)(we),Ce=n(279);function Ie(e){var t=gapi.client.sheets;function n(){return(n=Object(g.a)(b.a.mark((function n(r){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.spreadsheets.values.get({spreadsheetId:e,range:r});case 2:return a=n.sent,n.abrupt("return",a.result);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return{readAsync:function(e){return n.apply(this,arguments)},writeAsync:function(n,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=a?"USER_ENTERED":"RAW",i={values:r};return t.spreadsheets.values.update({spreadsheetId:e,range:n,valueInputOption:s,requestBody:i})},appendAsync:function(n,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=a?"USER_ENTERED":"RAW",i={values:r};return t.spreadsheets.values.append({spreadsheetId:e,range:n,valueInputOption:s,requestBody:i})}}}function Me(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(g.a)(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gapi.client.sheets,e.next=3,n.spreadsheets.get({spreadsheetId:t});case 3:return r=e.sent,a=JSON.parse(r.body).sheets,e.abrupt("return",a.map((function(e){return e.properties})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fe={"-":ce.NoFailure,"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430":ce.NotChosen,"\u041d\u0435 \u0434\u043e\u043f\u0443\u0449\u0435\u043d (\u0434\u0435\u043a\u0430\u043d\u0430\u0442)":ce.NotAllowedByDeansOffice,"\u041d\u0435 \u044f\u0432\u0438\u043b\u0441\u044f":ce.NotAppeared,"\u041d\u0435\u0443\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f":ce.DisrespectfulReason,"\u0423\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f":ce.RespectfulReason,"\u041d\u0435 \u0434\u043e\u043f\u0443\u0449\u0435\u043d":ce.NotAllowedByTeacher,"\u041d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u0434\u0430\u0432\u0430\u0442\u044c":ce.ShouldNotPass,"\u0410\u043a\u0430\u0434\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043e\u0442\u043f\u0443\u0441\u043a":ce.AcademicLeave,"\u0412\u044b\u0431\u044b\u043b":ce.DroppedOut};function Le(e){if(null===e||void 0===e)return null;for(var t=0,n=Object.keys(Fe);t<n.length;t++){var r=n[t];if(fe(r,e))return Fe[r]}return ce.NoFailure}function Te(e){if(null===e||void 0===e)return null;for(var t=0,n=Object.keys(Fe);t<n.length;t++){var r=n[t];if(Fe[r]===e)return r}return"-"}function De(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(g.a)(b.a.mark((function e(t,n){var r,a,s,i,o,c,u,l,d,h,p,f,g,v,m=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>2&&void 0!==m[2]?m[2]:0,a=m.length>3&&void 0!==m[3]?m[3]:1,s=m.length>4&&void 0!==m[4]?m[4]:null,i=m.length>5&&void 0!==m[5]?m[5]:null,o=Ie(t),e.next=7,o.readAsync(n);case 7:if(e.t0=e.sent.values,e.t0){e.next=10;break}e.t0=[];case 10:c=e.t0,u=[],l=Object(de.a)(c);try{for(l.s();!(d=l.n()).done;)h=d.value,p=h[r],f=h[a],g=null!==s?h[s]:null,v=null!==i?Le(h[i]):null,p&&f&&u.push({fullName:p,groupName:f,id:g,failure:v,properties:h})}catch(b){l.e(b)}finally{l.f()}return e.abrupt("return",u);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e,t){return We.apply(this,arguments)}function We(){return(We=Object(g.a)(b.a.mark((function e(t,n){var r,a,s,i,o,c,u,l,d,h,p=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]?p[2]:null,a=p.length>3&&void 0!==p[3]?p[3]:null,e.next=4,Pe(t,n);case 4:return s=e.sent,i=Re(s),o=_e(i),c=ze(n,o),u=Be(i,o),l=qe(s,o,r),e.next=12,De(t,c,o.fullNameColumn-o.left,o.groupColumn-o.left,null,o.failureColumn-o.left);case 12:return d=e.sent,h=a?d.filter(a):d,e.abrupt("return",{actualStudents:h,disciplineConfig:l,controlActionConfigs:u});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t){return He.apply(this,arguments)}function He(){return(He=Object(g.a)(b.a.mark((function e(t,n){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ie(t),e.next=3,r.readAsync(n+"!A1:ZZ100");case 3:return a=e.sent.values,e.abrupt("return",a||null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e){var t=e&&e[0];if(!t)throw new Error("Can't read header of spreadsheet");return t}function _e(e){var t=e&&e.map((function(e){return pe(e)})),n=t.indexOf(pe("\u0413\u0440\u0443\u043f\u043f\u0430 \u0432 \u0411\u0420\u0421")),r=t.indexOf(pe("\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0418\u043c\u044f \u0432 \u0411\u0420\u0421")),a=t.indexOf(pe("\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f")),s=t.indexOf(pe("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432")),i=t.indexOf(pe("\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432"));if(a<0||n<0||r<0||n>a||r>a||1!==Math.abs(r-n)||s<0||i<0||s<=a||i<=a||i!==s+1)throw new Error("Wrong order of columns");return{groupColumn:n,fullNameColumn:r,failureColumn:a,disciplineKeyColumn:s,disciplineValueColumn:i,left:Math.min(n,r),right:a}}function ze(e,t){var n=String.fromCharCode("A".charCodeAt(0)+t.left),r=String.fromCharCode("A".charCodeAt(0)+t.right);return"".concat(e,"!").concat(n,"2:").concat(r)}function Be(e,t){for(var n=[],r=t.left;r<=t.right;r++)r!==t.groupColumn&&r!==t.fullNameColumn&&r!==t.failureColumn&&e[r]&&n.push({controlActions:[e[r]],propertyIndex:r-t.left});for(var a=function(){var e=i[s];if(1===e.controlActions.length){var t=n.filter((function(t){return 1===t.controlActions.length&&fe(t.controlActions[0],e.controlActions[0])}));if(t.length>1){e.matchCount=t.length;for(var r=0;r<t.length;r++)t[r].matchIndex=r}}},s=0,i=n;s<i.length;s++)a();return n}function qe(e,t,n){for(var r={name:"",year:0,termType:ue.Fall,course:1,isModule:!1,defaultStudentFailure:ce.NoFailure,isSuitableDiscipline:null},a=0;a<e.length;a++){var s,i,o=null===(s=e[a][t.disciplineKeyColumn])||void 0===s?void 0:s.trim();if(!o)break;Je(r,o,null===(i=e[a][t.disciplineValueColumn])||void 0===i?void 0:i.trim())}return r.isSuitableDiscipline=n,r}function Je(e,t,n){if(fe(t,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430"))n&&(e.name=n);else if(fe(t,"\u0418\u0422\u0421"))n&&(e.isModule="\u0434\u0430"===n.toLowerCase());else if(fe(t,"\u0413\u043e\u0434"))n&&(e.year=parseInt(n.toLowerCase(),10));else if(fe(t,"\u0421\u0435\u043c\u0435\u0441\u0442\u0440"))n&&("\u043e\u0441\u0435\u043d\u043d\u0438\u0439"===n.toLowerCase()?e.termType=ue.Fall:"\u0432\u0435\u0441\u0435\u043d\u043d\u0438\u0439"===n.toLowerCase()&&(e.termType=ue.Spring));else if(fe(t,"\u041a\u0443\u0440\u0441")){if(n){var r=n.toLowerCase().trim();e.course="\u0432\u0441\u0435 \u043a\u0443\u0440\u0441\u044b"===r?0:parseInt(n.toLowerCase(),10)}}else if(fe(t,"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e")){var a;e.defaultStudentFailure=null!==(a=Le(n))&&void 0!==a?a:ce.NoFailure}}n(540);var Ge=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).handleChange=function(e){var t=e.target;switch(t.name){case"table-url":r.state.tableUrlError.error&&r.setState({tableUrlError:{error:!1,message:""}}),r.setState({tableUrl:t.value})}},r.loadTable=function(){var e=Object(g.a)(b.a.mark((function e(t){var n,a,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r.setState({loading:!0}),e.next=4,r.getSpreadsheetInfo();case 4:if(a=e.sent){e.next=8;break}return r.setState({loading:!1}),e.abrupt("return");case 8:return e.prev=8,e.next=11,Ee(a.spreadsheetId,a.sheetName);case 11:s=e.sent,e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(8),r.setState({loading:!1}),r.props.onError(e.t0.message||JSON.stringify(e.t0)),e.abrupt("return");case 19:i=r.prepareModuleGroup(s),r.setState({loading:!1,moduleGroups:[i]}),null===(n=r.props.onDataLoaded)||void 0===n||n.call(null,s);case 22:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t){return e.apply(this,arguments)}}(),r.state={tableUrl:"",loading:!1,tableUrlError:{error:!1,message:""},moduleGroups:[]},r}return Object(d.a)(n,[{key:"prepareModuleGroup",value:function(e){var t=e.actualStudents.map((function(e){return e.groupName}));return{title:e.disciplineConfig.name,nestedItems:Array.from(new Set(t))}}},{key:"getSpreadsheetInfo",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,n,r,a,s,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(Ce.a)(/d\/([\x2D0-9A-Z_a-z]+)\/edit(#gid=([0-9]+))?/,{spreadsheetId:1,sheetId:3}),(null===(n=this.state.tableUrl.match(t))||void 0===n?void 0:n.groups)&&n.groups.spreadsheetId){e.next=5;break}return this.setState({loading:!1,tableUrlError:{error:!0,message:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 url-\u0430\u0434\u0440\u0435\u0441."}}),e.abrupt("return",null);case 5:return r=n.groups.spreadsheetId,a=n.groups.sheetId||null,e.prev=7,e.next=10,Me(r);case 10:if(s=e.sent,i=a?s.filter((function(e){return e.sheetId.toString()===a}))[0]:s[0]){e.next=15;break}return this.props.onError("Sheet is not found"),e.abrupt("return",null);case 15:return o=i.title,e.abrupt("return",{spreadsheetId:r,sheetName:o});case 19:return e.prev=19,e.t0=e.catch(7),this.props.onError(e.t0.message||JSON.stringify(e.t0)),e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,this,[[7,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(r.jsxs)("span",{className:"spreadsheet-fetch",children:[Object(r.jsx)("h3",{className:"header",children:"\u0412\u0441\u0442\u0430\u0432\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 Google \u0422\u0430\u0431\u043b\u0438\u0446\u0443"}),Object(r.jsxs)("form",{onSubmit:this.loadTable,className:"form",children:[Object(r.jsx)(M.a,{name:"table-url",label:"\u0421\u0441\u044b\u043b\u043a\u0430",type:"text",className:"tableUrl",value:this.state.tableUrl,onChange:this.handleChange,error:this.state.tableUrlError.error,helperText:this.state.tableUrlError.message,required:!0}),Object(r.jsx)(L,{title:"\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",loading:this.state.loading,className:"submit"})]}),Object(r.jsx)(J.a,{in:!!this.state.moduleGroups.length,children:Object(r.jsx)(ae,{items:this.state.moduleGroups,collapsed:!1})})]})}}]),n}(s.a.Component),Ke=Object(a.memo)(Ge),Ze=n(6),Xe=n(609),Ye=n(601),Ve=n(599),$e=n(600),Qe=Object(Ze.a)((function(){return{root:{padding:0}}}))(Ve.a),et=Object(Ze.a)((function(){return{root:{display:"flex",justifyContent:"space-around"}}}))($e.a),tt=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).marksManager=void 0,r.logMessage=function(e){r.setState({logItems:[].concat(Object(le.a)(r.state.logItems),[e])})},r.startWork=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.marksManager.getLogger().addLogHandler(r.logMessage),e.next=3,r.marksManager.putMarksToBrsAsync(r.props.marksData);case 3:r.marksManager.getLogger().removeLogHandler(r.logMessage),r.setState({cancelPending:!1,okLoading:!1});case 5:case"end":return e.stop()}}),e)}))),r.cancelWork=function(){r.setState({cancelPending:!0}),r.marksManager.cancel()},r.marksManager=e.marksManager,r.state={okLoading:!0,cancelPending:!1,logItems:[]},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.startWork()}},{key:"componentWillUnmount",value:function(){this.cancelWork()}},{key:"render",value:function(){return Object(r.jsx)(s.a.Fragment,{children:Object(r.jsxs)(Xe.a,{open:this.props.runWork,maxWidth:"lg",fullWidth:!0,children:[Object(r.jsx)(Ye.a,{children:"\u041b\u043e\u0433 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439"}),Object(r.jsx)(Qe,{dividers:!0,children:Object(r.jsx)(K.a,{dense:!0,disablePadding:!0,style:{minHeight:400},children:this.state.logItems.map((function(e,t){return Object(r.jsx)(Z.a,{style:{paddingTop:0,paddingBottom:0},children:Object(r.jsx)(X.a,{primary:e,style:{marginTop:2,marginBottom:2}})},t)}))})}),Object(r.jsxs)(et,{children:[Object(r.jsx)(L,{loading:this.state.okLoading,onClick:this.props.onClosed,title:"\u043e\u043a"}),Object(r.jsx)(L,{loading:this.state.cancelPending,disabled:!this.state.okLoading,onClick:this.cancelWork,title:"\u043e\u0442\u043c\u0435\u043d\u0430"})]})]})})}}]),n}(s.a.Component);function nt(e){return e.toLowerCase().replace("\u0451","\u0435").replace(/[ ]+/," ").trim()}var rt=function(){function e(t,n,r){Object(l.a)(this,e),this.brsApi=void 0,this.options=void 0,this.logger=void 0,this.brsApi=t,this.logger=n,this.options=r}return Object(d.a)(e,[{key:"putMarksForDisciplineAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r,a){var s,i,o,c,u,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return");case 2:return this.logger.log("# Processing group ".concat(t.group)),this.logger.log(""),e.next=6,this.brsApi.getAllControlActionsCachedAsync(t);case 6:if(s=e.sent,this.checkControlActionsConfiguration(s,a)){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.brsApi.getAllStudentMarksAsync(t);case 11:return i=e.sent,o=this.mergeStudents(n,i),c=o.mergedStudents,u=o.skippedActualStudents,l=o.skippedBrsStudents,this.logMergedStudents(c,u,l),this.logger.log(""),e.next=17,this.putMarksForStudentsAsync(t,c,a,s);case 17:return this.logger.log(""),e.next=20,this.updateFailuresForSkippedStudentsAsync(l,t,r);case 20:if(this.logger.log(""),!this.options.save){e.next=24;break}return e.next=24,this.brsApi.updateAllMarksAsync(t);case 24:this.logger.log("");case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"checkControlActionsConfiguration",value:function(e,t){var n,r=Object(de.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!this.getSuitableControlAction(a,e))return!1}}catch(s){r.e(s)}finally{r.f()}return!0}},{key:"putMarksForStudentsAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r,a){var s,i,o,c,u,l,d,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s={},i=Object(de.a)(n),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=13;break}return c=o.value,e.next=8,this.putMarksForStudentAsync(t,c,r,a);case 8:u=e.sent,void 0===s[u]&&(s[u]=0),s[u]++;case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),i.e(e.t0);case 18:return e.prev=18,i.f(),e.finish(18);case 21:for(this.logger.log("Marks update statuses:"),l=0,d=Object.keys(s);l<d.length;l++)h=d[l],this.logger.log("- ".concat(h," = ").concat(s[h]));case 23:case"end":return e.stop()}}),e,this,[[2,15,18,21]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"putMarksForStudentAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r,a){var s,i,o,c,u,l,d,h,p,f,g,v,m,j,y,x;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0,c=0,u=[],l=Object(de.a)(r),e.prev=4,l.s();case 6:if((d=l.n()).done){e.next=31;break}if(h=d.value,p=this.getSuitableControlAction(h,a)){e.next=11;break}throw new Error;case 11:if(f=be(n.brs[p.uuid]),(g=be(n.actual.properties[h.propertyIndex]))!==f&&0!==g){e.next=18;break}return u.push("    ".concat(g," ").substr("".concat(g).length-1)),e.abrupt("continue",29);case 18:u.push("    ".concat(g,"!").substr("".concat(g).length-1));case 19:if(e.prev=19,!this.options.save){e.next=23;break}return e.next=23,this.brsApi.putStudentMarkAsync(n.brs.studentUuid,p.uuidWithoutPrefix,g,t.groupHistoryId,n.brs.cardType,n.brs.disciplineLoad);case 23:o++,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(19),c++;case 29:e.next=6;break;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(4),l.e(e.t1);case 36:return e.prev=36,l.f(),e.finish(36);case 39:if(v=null!==(s=n.brs.failure)&&void 0!==s?s:ce.NoFailure,m=null!==(i=n.actual.failure)&&void 0!==i?i:ce.NoFailure,j="",m!==v){e.next=46;break}j="".concat(Te(m)),e.next=57;break;case 46:if(j="".concat(Te(m),"!"),e.prev=47,!this.options.save){e.next=51;break}return e.next=51,this.brsApi.putStudentFailureAsync(n.brs.studentUuid,t,m);case 51:o++,e.next=57;break;case 54:e.prev=54,e.t2=e.catch(47),c++;case 57:return y=c>0?"FAILED ":o>0?"UPDATED":"SKIPPED",(this.options.verbose||c>0)&&(x=(n.actual.fullName+"                              ").substr(0,30),this.logger.log("".concat(y," ").concat(x," updated: ").concat(o,", failed: ").concat(c,", marks: ").concat(u.join(" "),", failureStatus: ").concat(j))),e.abrupt("return",y);case 60:case"end":return e.stop()}}),e,this,[[4,33,36,39],[19,26],[47,54]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getSuitableControlAction",value:function(e,t){var n=t.filter((function(t){return e.controlActions.some((function(e){return fe(t.controlAction,e)}))}));return 0===n.length?(this.logger.log("All of ".concat(e.controlActions.join(", ")," not found")),this.logger.log("Known actions: ".concat(t.map((function(e){return e.controlAction})).join(", "))),null):void 0!==e.matchIndex||void 0!==e.matchCount?void 0===e.matchIndex||void 0===e.matchCount||n.length!==e.matchCount||e.matchIndex>=e.matchCount?(this.logger.log("Invalid configuration of ".concat(e.controlActions.join(", "))),this.logger.log("Can't match: ".concat(e.matchIndex,"/").concat(e.matchCount," of ").concat(n.length)),null):n[e.matchIndex]:n.length>1?(this.logger.log("Several control actions found for ".concat(e.controlActions.join(", "))),this.logger.log("Found actions: ".concat(n.map((function(e){return e.controlAction})).join(", "))),null):n[0]}},{key:"updateFailuresForSkippedStudentsAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r){var a,s,i,o,c,u,l,d,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},s=Object(de.a)(t),e.prev=2,s.s();case 4:if((i=s.n()).done){e.next=13;break}return o=i.value,e.next=8,this.updateFailureForStudent(o,n,r);case 8:c=e.sent,void 0===a[c]&&(a[c]=0),a[c]++;case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),s.e(e.t0);case 18:return e.prev=18,s.f(),e.finish(18);case 21:if((u=Object.keys(a)).length>0){this.logger.log("Failures update statuses:"),l=Object(de.a)(u);try{for(l.s();!(d=l.n()).done;)h=d.value,this.logger.log("- ".concat(h," = ").concat(a[h]))}catch(p){l.e(p)}finally{l.f()}}else this.logger.log("No failures for skipped students");case 23:case"end":return e.stop()}}),e,this,[[2,15,18,21]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"updateFailureForStudent",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n,r){var a,s,i,o,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="",s=t.failure?t.failure:ce.NoFailure,(i=r)!==s){e.next=7;break}a="SKIPPED",e.next=17;break;case 7:if(e.prev=7,!this.options.save){e.next=11;break}return e.next=11,this.brsApi.putStudentFailureAsync(t.studentUuid,n,i);case 11:a="UPDATED",e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),a="FAILED";case 17:return(this.options.verbose||"FAILED"===a)&&(o=(t.studentFio+"                              ").substr(0,30),c="SKIPPED"!==a?"".concat(Te(i)," from ").concat(Te(s)):Te(i),this.logger.log("".concat(a," ").concat(o," ").concat(c))),e.abrupt("return",a);case 19:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"mergeStudents",value:function(e,t){var n,r=t.filter(at),a=[],s=[],i=Object(de.a)(e);try{var o=function(){var e=n.value,t=r.filter((function(t){return function(e,t){var n=nt(e.studentFio),r=nt(t.fullName);return n.startsWith(r)}(t,e)}));1===t.length?a.push({actual:e,brs:t[0]}):s.push(e)};for(i.s();!(n=i.n()).done;)o()}catch(h){i.e(h)}finally{i.f()}var c,u=[],l=Object(de.a)(r);try{var d=function(){var e=c.value;a.some((function(t){return t.brs.studentUuid===e.studentUuid}))||u.push(e)};for(l.s();!(c=l.n()).done;)d()}catch(h){l.e(h)}finally{l.f()}return{mergedStudents:a,skippedActualStudents:s,skippedBrsStudents:u}}},{key:"logMergedStudents",value:function(e,t,n){this.logger.log("Merged students = ".concat(e.length)),this.logger.log("Can't merge actual students = ".concat(t.length));var r,a=Object(de.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;this.logger.log("- "+s.fullName)}}catch(u){a.e(u)}finally{a.f()}this.logger.log("Can't merge BRS students = ".concat(n.length));var i,o=Object(de.a)(n);try{for(o.s();!(i=o.n()).done;){var c=i.value;this.logger.log("- "+c.studentFio)}}catch(u){o.e(u)}finally{o.f()}}}]),e}();function at(e){return"\u041f\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043d"!==e.studentStatus&&"\u041e\u0442\u0447\u0438\u0441\u043b\u0435\u043d"!==e.studentStatus}var st=function(){function e(t,n,r){Object(l.a)(this,e),this.brsApi=void 0,this.logger=void 0,this.disciplineMarksManager=void 0,this.cancelPending=!1,this.brsApi=t,this.logger=n,this.disciplineMarksManager=new rt(t,n,r)}return Object(d.a)(e,[{key:"cancel",value:function(){this.cancelPending=!0}},{key:"putMarksToBrsAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t){var n,r,a,s,i,o,c,u=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.actualStudents,r=t.disciplineConfig,a=t.controlActionConfigs,e.prev=1,e.next=4,this.getSuitableDisciplinesAsync(r);case 4:s=e.sent,i=Object(de.a)(s),e.prev=6,c=b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.value,e.next=3,u.disciplineMarksManager.putMarksForDisciplineAsync(t,n.filter((function(e){return fe(e.groupName,t.group)})),r.defaultStudentFailure,a);case 3:if(!u.cancelPending){e.next=5;break}return e.abrupt("return","break");case 5:case"end":return e.stop()}}),e)})),i.s();case 9:if((o=i.n()).done){e.next=16;break}return e.delegateYield(c(),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",16);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),i.e(e.t1);case 21:return e.prev=21,i.f(),e.finish(21);case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(1),this.logger.error(e.t2);case 29:case"end":return e.stop()}}),e,this,[[1,26],[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getSuitableDisciplinesAsync",value:function(){var e=Object(g.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.brsApi.getDisciplineCachedAsync(t.year,t.termType,t.course,t.isModule);case 2:return n=e.sent,r=n.filter((function(e){return fe(e.discipline,t.name)&&(!t.isSuitableDiscipline||t.isSuitableDiscipline(e))})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLogger",value:function(){return this.logger}}]),e}(),it=n(602),ot=n(603),ct=s.a.forwardRef((function(e,t){return Object(r.jsx)(it.a,Object(A.a)({direction:"up",ref:t},e))}));function ut(e){var t=e.open,n=e.sessionName,a=e.brsAuth,i=s.a.useState(!1),o=Object(z.a)(i,2),c=o[0],l=o[1];return Object(r.jsxs)(s.a.Fragment,{children:[c&&Object(r.jsx)(u.a,{to:"/brs-extensions"}),Object(r.jsxs)(Xe.a,{open:t,TransitionComponent:ct,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(r.jsx)(Ye.a,{id:"alert-dialog-slide-title",children:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(r.jsx)(Ve.a,{children:Object(r.jsxs)(ot.a,{id:"alert-dialog-slide-description",children:["\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u0438 ",n," \u0438\u0441\u0442\u0435\u043a\u043b\u043e. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f."]})}),Object(r.jsx)($e.a,{style:{display:"flex",justifyContent:"space-around"},children:Object(r.jsx)(N.a,{onClick:function(){a.logout(),l(!0)},color:"primary",children:"\u041e\u043a"})})]})]})}var lt=["https://sheets.googleapis.com/$discovery/rest?version=v4"],dt={init:function(){return Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gapi.client){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new Promise((function(e){gapi.load("client:auth2",Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gapi.client.init({clientId:"122993083593-pacve8csj86voko30ia65raeg0ncrtuv.apps.googleusercontent.com",discoveryDocs:lt,scope:"https://www.googleapis.com/auth/spreadsheets"}).catch(console.error);case 2:e();case 3:case"end":return t.stop()}}),t)}))))})));case 3:case"end":return e.stop()}}),e)})))()},checkAuthorized:function(){var e,t,n;return null===(e=gapi.auth2)||void 0===e||null===(t=e.getAuthInstance())||void 0===t||null===(n=t.isSignedIn)||void 0===n?void 0:n.get()}},ht=function(){function e(){Object(l.a)(this,e),this.logHandlers=void 0,this.errorHandlers=void 0}return Object(d.a)(e,[{key:"addLogHandler",value:function(e){this.logHandlers||(this.logHandlers=[]),this.logHandlers.push(e)}},{key:"removeLogHandler",value:function(e){this.logHandlers&&(this.logHandlers=this.logHandlers.filter((function(t){return t!==e})))}},{key:"addErrorHandler",value:function(e){this.errorHandlers||(this.errorHandlers=[]),this.errorHandlers.push(e)}},{key:"removeErrorHandler",value:function(e){this.errorHandlers&&(this.errorHandlers=this.errorHandlers.filter((function(t){return t!==e})))}},{key:"log",value:function(e){if(this.logHandlers){var t,n=Object(de.a)(this.logHandlers);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"error",value:function(e){if(this.errorHandlers){var t,n=Object(de.a)(this.errorHandlers);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(r){n.e(r)}finally{n.f()}}}}]),e}(),pt=function(e){var t=e.show,n=e.onRunWorkSafe,a=e.onRunWorkUnsafe;return Object(r.jsx)(J.a,{in:t,children:Object(r.jsxs)(I.a,{container:!0,justify:"space-around",children:[Object(r.jsx)(I.a,{item:!0,children:Object(r.jsx)(N.a,{variant:"contained",onClick:n,color:"primary",children:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0445\u043e\u0440\u043e\u0448\u043e"})}),Object(r.jsx)(I.a,{item:!0,children:Object(r.jsx)(N.a,{variant:"contained",onClick:a,color:"secondary",children:"\u0421\u0434\u0435\u043b\u0430\u0439 \u0445\u043e\u0440\u043e\u0448\u043e"})})]})})},ft=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).marksData=void 0,r.marksManager=void 0,r.handleDataLoaded=function(e){r.marksData=e,r.setState({showControls:!0})},r.runWork=function(e){var t=new ht;t.addErrorHandler(r.handleError);var n={save:e,verbose:!0},a=r.props.brsAuth,s=new he(a,a.brsUrlProvider);r.marksManager=new st(s,t,n),r.setState({runWork:!0})},r.handleRunWorkSafe=function(){r.runWork(!1)},r.handleRunWorkUnsafe=function(){r.runWork(!0)},r.handleClosed=function(){r.setState({runWork:!1})},r.handleUnauthorized=function(e){r.setState({openUnauthorizedAlert:!0,sessionName:e})},r.handleError=function(e){var t=e.message||JSON.stringify(e);t.endsWith(" is Forbidden")?r.handleUnauthorized("\u0411\u0420\u0421"):r.setState({errorMessage:t})},r.closeError=function(){r.setState({errorMessage:""})},r.marksData={},r.marksManager={},r.state={showControls:!1,runWork:!1,openUnauthorizedAlert:!1,sessionName:"",errorMessage:""},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.init();case 2:t=this.props.brsAuth.checkAuth(),n=dt.checkAuthorized(),t?n||this.handleUnauthorized("Google"):this.handleUnauthorized("\u0411\u0420\u0421");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(r.jsxs)(s.a.Fragment,{children:[this.state.openUnauthorizedAlert&&Object(r.jsx)(ut,{brsAuth:this.props.brsAuth,sessionName:this.state.sessionName,open:this.state.openUnauthorizedAlert}),this.state.errorMessage&&Object(r.jsx)(P,{open:!!this.state.errorMessage,message:this.state.errorMessage,type:"error",onClose:this.closeError}),Object(r.jsx)("div",{className:"work-page",children:Object(r.jsxs)(C.a,{maxWidth:"md",children:[Object(r.jsx)(Se,{brsApi:this.props.brsApi,onUnauthorized:this.handleUnauthorized}),Object(r.jsx)("hr",{}),Object(r.jsx)(Ke,{onDataLoaded:this.handleDataLoaded,onError:this.handleError}),Object(r.jsx)("br",{}),Object(r.jsx)(pt,{show:this.state.showControls,onRunWorkUnsafe:this.handleRunWorkUnsafe,onRunWorkSafe:this.handleRunWorkSafe}),this.state.runWork&&Object(r.jsx)(tt,{runWork:this.state.runWork,marksData:this.marksData,marksManager:this.marksManager,onClosed:this.handleClosed})]})})]})}}]),n}(s.a.Component),bt=function(){return Object(r.jsx)(k.Consumer,{children:function(e){return Object(r.jsx)(ft,{brsAuth:e.brsAuth,brsApi:e.brsApi})}})},gt=new p(!0),vt=new O(gt),mt=new he(vt,gt);function jt(){return Object(r.jsx)(k.Provider,{value:{brsAuth:vt,brsApi:mt},children:Object(r.jsx)(c.a,{children:Object(r.jsxs)(u.d,{children:[Object(r.jsx)(u.b,{path:"/brs-extensions/work",component:bt}),Object(r.jsx)(u.b,{exact:!0,path:"/brs-extensions",component:_})]})})})}var yt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,614)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),s(e),i(e)}))};n(541);o.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(jt,{})}),document.getElementById("root")),yt()}},[[542,1,2]]]);
//# sourceMappingURL=main.a74b736f.chunk.js.map